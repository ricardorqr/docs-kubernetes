<div class="td-content"><h1 data-pagefind-weight="10">Generating Reference Documentation for Metrics</h1><p>This page demonstrates the generation of metrics reference documentation.</p><h2 id="before-you-begin">Before you begin</h2><h3 id="requirements">Requirements:</h3><ul><li><p>You need a machine that is running Linux or macOS.</p></li><li><p>You need to have these tools installed:</p><ul><li><a href="https://www.python.org/downloads/">Python</a> v3.7.x+</li><li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a></li><li><a href="https://go.dev/dl/">Golang</a> version 1.13+</li><li><a href="https://pypi.org/project/pip/">Pip</a> used to install PyYAML</li><li><a href="https://pyyaml.org/">PyYAML</a> v5.1.2</li><li><a href="https://www.gnu.org/software/make/">make</a></li><li><a href="https://gcc.gnu.org/">gcc compiler/linker</a></li><li><a href="https://docs.docker.com/engine/installation/">Docker</a> (Required only for <code>kubectl</code> command reference)</li></ul></li><li><p>Your <code>PATH</code> environment variable must include the required build tools, such as the <code>Go</code> binary and <code>python</code>.</p></li><li><p>You need to know how to create a pull request to a GitHub repository.
This involves creating your own fork of the repository. For more
information, see <a href="/docs/contribute/new-content/open-a-pr/#fork-the-repo">Work from a local clone</a>.</p></li></ul><h2 id="clone-the-kubernetes-repository">Clone the Kubernetes repository</h2><p>The metric generation happens in the Kubernetes repository.
To clone the repository, change directories to where you want the clone to exist.</p><p>Then, execute the following command:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>git clone https://www.github.com/kubernetes/kubernetes 
</span></span></code></pre></div><p>This creates a <code>kubernetes</code> folder in your current working directory.</p><h2 id="generate-the-metrics">Generate the metrics</h2><p>Inside the cloned Kubernetes repository, locate the
<code>test/instrumentation/documentation</code> directory.
The metrics documentation is generated in this directory.</p><p>With each release, new metrics are added.
After you run the metrics documentation generator script, copy the
metrics documentation to the Kubernetes website and
publish the updated metrics documentation.</p><p>To generate the latest metrics, make sure you are in the root of the cloned Kubernetes directory.
Then, execute the following command:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>./test/instrumentation/update-documentation.sh
</span></span></code></pre></div><p>To check for changes, execute:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>git status
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>./test/instrumentation/documentation/documentation.md&#13;
./test/instrumentation/documentation/documentation-list.yaml
</code></pre><h2 id="copy-the-generated-metrics-documentation-file-to-the-kubernetes-website-repository">Copy the generated metrics documentation file to the Kubernetes website repository</h2><ol><li><p>Set the Kubernetes website root environment variable.</p><p>Execute the following command to set the website root:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#a2f">export</span> <span style="color:#b8860b">WEBSITE_ROOT</span><span style="color:#666">=</span>&lt;path to website root&gt;
</span></span></code></pre></div></li><li><p>Copy the generated metrics file to the Kubernetes website repository.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>cp ./test/instrumentation/documentation/documentation.md <span style="color:#b44">"</span><span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">WEBSITE_ROOT</span><span style="color:#b68;font-weight:700">}</span><span style="color:#b44">/content/en/docs/reference/instrumentation/metrics.md"</span>
</span></span></code></pre></div><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>If you get an error, check that you have permission to copy the file.
You can use <code>chown</code> to change the file ownership back to your own user.</div></li></ol><h2 id="create-a-pull-request">Create a pull request</h2><p>To create a pull request, follow the instructions in <a href="/docs/contribute/new-content/open-a-pr/">Opening a pull request</a>.</p><h2 id="what-s-next">What's next</h2><ul><li><a href="/docs/contribute/generate-ref-docs/contribute-upstream/">Contribute-upstream</a></li><li><a href="/docs/contribute/generate-ref-docs/kubernetes-components/">Generating Reference Docs for Kubernetes Components and Tools</a></li><li><a href="/docs/contribute/generate-ref-docs/kubectl/">Generating Reference Documentation for kubectl Commands</a></li></ul></div>