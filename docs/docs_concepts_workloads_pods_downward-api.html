<div class="td-content"><h1 data-pagefind-weight="10">Downward API</h1><div class="lead">There are two ways to expose Pod and container fields to a running container: environment variables, and as files that are populated by a special volume type. Together, these two ways of exposing Pod and container fields are called the downward API.</div><p>It is sometimes useful for a container to have information about itself, without
being overly coupled to Kubernetes. The <em>downward API</em> allows containers to consume
information about themselves or the cluster without using the Kubernetes client
or API server.</p><p>An example is an existing application that assumes a particular well-known
environment variable holds a unique identifier. One possibility is to wrap the
application, but that is tedious and error-prone, and it violates the goal of low
coupling. A better option would be to use the Pod's name as an identifier, and
inject the Pod's name into the well-known environment variable.</p><p>In Kubernetes, there are two ways to expose Pod and container fields to a running container:</p><ul><li>as <a href="/docs/tasks/inject-data-application/environment-variable-expose-pod-information/">environment variables</a></li><li>as <a href="/docs/tasks/inject-data-application/downward-api-volume-expose-pod-information/">files in a <code>downwardAPI</code> volume</a></li></ul><p>Together, these two ways of exposing Pod and container fields are called the
<em>downward API</em>.</p><h2 id="available-fields">Available fields</h2><p>Only some Kubernetes API fields are available through the downward API. This
section lists which fields you can make available.</p><p>You can pass information from available Pod-level fields using <code>fieldRef</code>.
At the API level, the <code>spec</code> for a Pod always defines at least one
<a href="/docs/reference/kubernetes-api/workload-resources/pod-v1/#Container">Container</a>.
You can pass information from available Container-level fields using
<code>resourceFieldRef</code>.</p><h3 id="downwardapi-fieldRef">Information available via <code>fieldRef</code></h3><p>For some Pod-level fields, you can provide them to a container either as
an environment variable or using a <code>downwardAPI</code> volume. The fields available
via either mechanism are:</p><dl><dt><code>metadata.name</code></dt><dd>the pod's name</dd><dt><code>metadata.namespace</code></dt><dd>the pod's <a class="glossary-tooltip" title="An abstraction used by Kubernetes to support isolation of groups of resources within a single cluster." data-toggle="tooltip" data-placement="top" href="/docs/concepts/overview/working-with-objects/namespaces" target="_blank" aria-label="namespace">namespace</a></dd><dt><code>metadata.uid</code></dt><dd>the pod's unique ID</dd><dt><code>metadata.annotations['&lt;KEY&gt;']</code></dt><dd>the value of the pod's <a class="glossary-tooltip" title="A key-value pair that is used to attach arbitrary non-identifying metadata to objects." data-toggle="tooltip" data-placement="top" href="/docs/concepts/overview/working-with-objects/annotations" target="_blank" aria-label="annotation">annotation</a> named <code>&lt;KEY&gt;</code> (for example, <code>metadata.annotations['myannotation']</code>)</dd><dt><code>metadata.labels['&lt;KEY&gt;']</code></dt><dd>the text value of the pod's <a class="glossary-tooltip" title="Tags objects with identifying attributes that are meaningful and relevant to users." data-toggle="tooltip" data-placement="top" href="/docs/concepts/overview/working-with-objects/labels" target="_blank" aria-label="label">label</a> named <code>&lt;KEY&gt;</code> (for example, <code>metadata.labels['mylabel']</code>)</dd></dl><p>The following information is available through environment variables
<strong>but not as a downwardAPI volume fieldRef</strong>:</p><dl><dt><code>spec.serviceAccountName</code></dt><dd>the name of the pod's <a class="glossary-tooltip" title="Provides an identity for processes that run in a Pod." data-toggle="tooltip" data-placement="top" href="/docs/tasks/configure-pod-container/configure-service-account/" target="_blank" aria-label="service account">service account</a></dd><dt><code>spec.nodeName</code></dt><dd>the name of the <a class="glossary-tooltip" title="A node is a worker machine in Kubernetes." data-toggle="tooltip" data-placement="top" href="/docs/concepts/architecture/nodes/" target="_blank" aria-label="node">node</a> where the Pod is executing</dd><dt><code>status.hostIP</code></dt><dd>the primary IP address of the node to which the Pod is assigned</dd><dt><code>status.hostIPs</code></dt><dd>the IP addresses is a dual-stack version of <code>status.hostIP</code>, the first is always the same as <code>status.hostIP</code>.</dd><dt><code>status.podIP</code></dt><dd>the pod's primary IP address (usually, its IPv4 address)</dd><dt><code>status.podIPs</code></dt><dd>the IP addresses is a dual-stack version of <code>status.podIP</code>, the first is always the same as <code>status.podIP</code></dd></dl><p>The following information is available through a <code>downwardAPI</code> volume
<code>fieldRef</code>, <strong>but not as environment variables</strong>:</p><dl><dt><code>metadata.labels</code></dt><dd>all of the pod's labels, formatted as <code>label-key="escaped-label-value"</code> with one label per line</dd><dt><code>metadata.annotations</code></dt><dd>all of the pod's annotations, formatted as <code>annotation-key="escaped-annotation-value"</code> with one annotation per line</dd></dl><h3 id="downwardapi-resourceFieldRef">Information available via <code>resourceFieldRef</code></h3><p>These container-level fields allow you to provide information about
<a href="/docs/concepts/configuration/manage-resources-containers/#requests-and-limits">requests and limits</a>
for resources such as CPU and memory.</p><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4><div class="feature-state-notice feature-beta" title="Feature Gate: InPlacePodVerticalScaling"><span class="feature-state-name">FEATURE STATE:</span>
<code>Kubernetes v1.33 [beta]</code> (enabled by default: true)</div><p>Container CPU and memory resources can be resized while the container is running.
If this happens, a downward API volume will be updated,
but environment variables will not be updated unless the container restarts.
See <a href="/docs/tasks/configure-pod-container/resize-container-resources/">Resize CPU and Memory Resources assigned to Containers</a>
for more details.</p></div><dl><dt><code>resource: limits.cpu</code></dt><dd>A container's CPU limit</dd><dt><code>resource: requests.cpu</code></dt><dd>A container's CPU request</dd><dt><code>resource: limits.memory</code></dt><dd>A container's memory limit</dd><dt><code>resource: requests.memory</code></dt><dd>A container's memory request</dd><dt><code>resource: limits.hugepages-*</code></dt><dd>A container's hugepages limit</dd><dt><code>resource: requests.hugepages-*</code></dt><dd>A container's hugepages request</dd><dt><code>resource: limits.ephemeral-storage</code></dt><dd>A container's ephemeral-storage limit</dd><dt><code>resource: requests.ephemeral-storage</code></dt><dd>A container's ephemeral-storage request</dd></dl><h4 id="fallback-information-for-resource-limits">Fallback information for resource limits</h4><p>If CPU and memory limits are not specified for a container, and you use the
downward API to try to expose that information, then the
kubelet defaults to exposing the maximum allocatable value for CPU and memory
based on the <a href="/docs/tasks/administer-cluster/reserve-compute-resources/#node-allocatable">node allocatable</a>
calculation.</p><h2 id="what-s-next">What's next</h2><p>You can read about <a href="/docs/concepts/storage/volumes/#downwardapi"><code>downwardAPI</code> volumes</a>.</p><p>You can try using the downward API to expose container- or Pod-level information:</p><ul><li>as <a href="/docs/tasks/inject-data-application/environment-variable-expose-pod-information/">environment variables</a></li><li>as <a href="/docs/tasks/inject-data-application/downward-api-volume-expose-pod-information/">files in <code>downwardAPI</code> volume</a></li></ul></div>