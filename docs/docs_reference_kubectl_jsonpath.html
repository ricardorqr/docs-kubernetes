<div class="td-content"><h1 data-pagefind-weight="10">JSONPath Support</h1><p>The <a class="glossary-tooltip" title="A command line tool for communicating with a Kubernetes cluster." data-toggle="tooltip" data-placement="top" href="/docs/reference/kubectl/" target="_blank" aria-label="kubectl">kubectl</a> tool supports JSONPath templates as an output format.</p><p>A <em>JSONPath template</em> is composed of JSONPath expressions enclosed by curly braces: <code>{</code> and <code>}</code>.
Kubectl uses JSONPath expressions to filter on specific fields in the JSON object and format the output.
In addition to the original JSONPath template syntax, the following functions and syntax are valid:</p><ol><li>Use double quotes to quote text inside JSONPath expressions.</li><li>Use the <code>range</code>, <code>end</code> operators to iterate lists.</li><li>Use negative slice indices to step backwards through a list.<br/>Negative indices do <em>not</em> "wrap around" a list and are valid as long as \( ( - index + listLength ) \ge 0 \).</li></ol><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4><ul><li><p>The <code>$</code> operator is optional since the expression always starts from the root object by default.</p></li><li><p>The result object is printed as its <code>String()</code> function.</p></li></ul></div><h2 id="functions">Functions in Kubernetes JSONPath</h2><p>Given the JSON input:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="display:flex"><span>{
</span></span><span style="display:flex"><span>  <span style="color:green;font-weight:700">"kind"</span>: <span style="color:#b44">"List"</span>,
</span></span><span style="display:flex"><span>  <span style="color:green;font-weight:700">"items"</span>:[
</span></span><span style="display:flex"><span>    {
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"kind"</span>:<span style="color:#b44">"None"</span>,
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"metadata"</span>:{
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"name"</span>:<span style="color:#b44">"127.0.0.1"</span>,
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"labels"</span>:{
</span></span><span style="display:flex"><span>          <span style="color:green;font-weight:700">"kubernetes.io/hostname"</span>:<span style="color:#b44">"127.0.0.1"</span>
</span></span><span style="display:flex"><span>        }
</span></span><span style="display:flex"><span>      },
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"status"</span>:{
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"capacity"</span>:{<span style="color:green;font-weight:700">"cpu"</span>:<span style="color:#b44">"4"</span>},
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"addresses"</span>:[{<span style="color:green;font-weight:700">"type"</span>: <span style="color:#b44">"LegacyHostIP"</span>, <span style="color:green;font-weight:700">"address"</span>:<span style="color:#b44">"127.0.0.1"</span>}]
</span></span><span style="display:flex"><span>      }
</span></span><span style="display:flex"><span>    },
</span></span><span style="display:flex"><span>    {
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"kind"</span>:<span style="color:#b44">"None"</span>,
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"metadata"</span>:{<span style="color:green;font-weight:700">"name"</span>:<span style="color:#b44">"127.0.0.2"</span>},
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"status"</span>:{
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"capacity"</span>:{<span style="color:green;font-weight:700">"cpu"</span>:<span style="color:#b44">"8"</span>},
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"addresses"</span>:[
</span></span><span style="display:flex"><span>          {<span style="color:green;font-weight:700">"type"</span>: <span style="color:#b44">"LegacyHostIP"</span>, <span style="color:green;font-weight:700">"address"</span>:<span style="color:#b44">"127.0.0.2"</span>},
</span></span><span style="display:flex"><span>          {<span style="color:green;font-weight:700">"type"</span>: <span style="color:#b44">"another"</span>, <span style="color:green;font-weight:700">"address"</span>:<span style="color:#b44">"127.0.0.3"</span>}
</span></span><span style="display:flex"><span>        ]
</span></span><span style="display:flex"><span>      }
</span></span><span style="display:flex"><span>    }
</span></span><span style="display:flex"><span>  ],
</span></span><span style="display:flex"><span>  <span style="color:green;font-weight:700">"users"</span>:[
</span></span><span style="display:flex"><span>    {
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"name"</span>: <span style="color:#b44">"myself"</span>,
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"user"</span>: {}
</span></span><span style="display:flex"><span>    },
</span></span><span style="display:flex"><span>    {
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"name"</span>: <span style="color:#b44">"e2e"</span>,
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"user"</span>: {<span style="color:green;font-weight:700">"username"</span>: <span style="color:#b44">"admin"</span>, <span style="color:green;font-weight:700">"password"</span>: <span style="color:#b44">"secret"</span>}
</span></span><span style="display:flex"><span>    }
</span></span><span style="display:flex"><span>  ]
</span></span><span style="display:flex"><span>}
</span></span></code></pre></div><table><caption style="display:none">Functions, their parameters, an example invocation, and the result</caption><thead><tr><th>Function</th><th>Description</th><th>Example</th><th>Result</th></tr></thead><tbody><tr><td><code>text</code></td><td>the plain text</td><td><code>kind is {.kind}</code></td><td><code>kind is List</code></td></tr><tr><td><code>@</code></td><td>the current object</td><td><code>{@}</code></td><td>the same as input</td></tr><tr><td><code>.</code> or <code>[]</code></td><td>child operator</td><td><code>{.kind}</code>, <code>{['kind']}</code> or <code>{['name\.type']}</code></td><td><code>List</code></td></tr><tr><td><code>..</code></td><td>recursive descent</td><td><code>{..name}</code></td><td><code>127.0.0.1 127.0.0.2 myself e2e</code></td></tr><tr><td><code>*</code></td><td>wildcard. Get all objects</td><td><code>{.items[*].metadata.name}</code></td><td><code>[127.0.0.1 127.0.0.2]</code></td></tr><tr><td><code>[start:end:step]</code></td><td>subscript operator</td><td><code>{.users[0].name}</code></td><td><code>myself</code></td></tr><tr><td><code>[,]</code></td><td>union operator</td><td><code>{.items[*]['metadata.name', 'status.capacity']}</code></td><td><code>127.0.0.1 127.0.0.2 map[cpu:4] map[cpu:8]</code></td></tr><tr><td><code>?()</code></td><td>filter</td><td><code>{.users[?(@.name=="e2e")].user.password}</code></td><td><code>secret</code></td></tr><tr><td><code>range</code>, <code>end</code></td><td>iterate list</td><td><code>{range .items[*]}[{.metadata.name}, {.status.capacity}] {end}</code></td><td><code>[127.0.0.1, map[cpu:4]] [127.0.0.2, map[cpu:8]]</code></td></tr><tr><td><code>''</code></td><td>quote interpreted string</td><td><code>{range .items[*]}{.metadata.name}{'\t'}{end}</code></td><td><code>127.0.0.1 127.0.0.2</code></td></tr><tr><td><code>\</code></td><td>escape termination character</td><td><code>{.items[0].metadata.labels.kubernetes\.io/hostname}</code></td><td><code>127.0.0.1</code></td></tr></tbody></table><h2 id="use-with-kubectl">Using JSONPath expressions with kubectl</h2><p>Examples using <code>kubectl</code> and JSONPath expressions:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl get pods -o json
</span></span><span style="display:flex"><span>kubectl get pods -o<span style="color:#666">=</span><span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">'{@}'</span>
</span></span><span style="display:flex"><span>kubectl get pods -o<span style="color:#666">=</span><span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">'{.items[0]}'</span>
</span></span><span style="display:flex"><span>kubectl get pods -o<span style="color:#666">=</span><span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">'{.items[0].metadata.name}'</span>
</span></span><span style="display:flex"><span>kubectl get pods -o<span style="color:#666">=</span><span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">"{.items[*]['metadata.name', 'status.capacity']}"</span>
</span></span><span style="display:flex"><span>kubectl get pods -o<span style="color:#666">=</span><span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">'{range .items[*]}{.metadata.name}{"\t"}{.status.startTime}{"\n"}{end}'</span>
</span></span><span style="display:flex"><span>kubectl get pods -o<span style="color:#666">=</span><span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">'{.items[0].metadata.labels.kubernetes\.io/hostname}'</span>
</span></span></code></pre></div><p>Or, with a "my_pod" and "my_namespace" (adjust these names to your environment):</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl get pod/my_pod -n my_namespace -o<span style="color:#666">=</span><span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">'{@}'</span>
</span></span><span style="display:flex"><span>kubectl get pod/my_pod -n my_namespace -o<span style="color:#666">=</span><span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">'{.metadata.name}'</span>
</span></span><span style="display:flex"><span>kubectl get pod/my_pod -n my_namespace -o<span style="color:#666">=</span><span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">'{.status}'</span>
</span></span></code></pre></div><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4><p>On Windows, you must <em>double</em> quote any JSONPath template that contains spaces (not single quote as shown above for bash). This in turn means that you must use a single quote or escaped double quote around any literals in the template. For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd"><span style="display:flex"><span>kubectl get pods -o=jsonpath=<span style="color:#b44">"{range .items[*]}{.metadata.name}{'\t'}{.status.startTime}{'\n'}{end}"</span>
</span></span><span style="display:flex"><span>kubectl get pods -o=jsonpath=<span style="color:#b44">"{range .items[*]}{.metadata.name}{\"</span>\t\<span style="color:#b44">"}{.status.startTime}{\"</span>\n\<span style="color:#b44">"}{end}"</span>
</span></span></code></pre></div></div><h2 id="regular-expressions-in-jsonpath">Regular expressions in JSONPath</h2><p>JSONPath regular expressions are not supported. If you want to match using regular expressions, you can use a tool such as <code>jq</code>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#080;font-style:italic"># kubectl does not support regular expressions for JSONpath output</span>
</span></span><span style="display:flex"><span><span style="color:#080;font-style:italic"># The following command does not work</span>
</span></span><span style="display:flex"><span>kubectl get pods -o <span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">'{.items[?(@.metadata.name=~/^test$/)].metadata.name}'</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:#080;font-style:italic"># The following command achieves the desired result</span>
</span></span><span style="display:flex"><span>kubectl get pods -o json | jq -r <span style="color:#b44">'.items[] | select(.metadata.name | test("test-")).metadata.name'</span>
</span></span></code></pre></div></div>