<div class="td-content"><h1 data-pagefind-weight="10">Volume Attributes Classes</h1><div class="feature-state-notice feature-stable" title="Feature Gate: VolumeAttributesClass"><span class="feature-state-name">FEATURE STATE:</span>
<code>Kubernetes v1.34 [stable]</code> (enabled by default: true)</div><p>This page assumes that you are familiar with <a href="/docs/concepts/storage/storage-classes/">StorageClasses</a>,
<a href="/docs/concepts/storage/volumes/">volumes</a> and <a href="/docs/concepts/storage/persistent-volumes/">PersistentVolumes</a>
in Kubernetes.</p><p>A VolumeAttributesClass provides a way for administrators to describe the mutable
"classes" of storage they offer. Different classes might map to different quality-of-service levels.
Kubernetes itself is un-opinionated about what these classes represent.</p><p>This feature is generally available (GA) as of version 1.34, and users have the option to disable it.</p><p>You can also only use VolumeAttributesClasses with storage backed by
<a class="glossary-tooltip" title="The Container Storage Interface (CSI) defines a standard interface to expose storage systems to containers." data-toggle="tooltip" data-placement="top" href="/docs/concepts/storage/volumes/#csi" target="_blank" aria-label="Container Storage Interface">Container Storage Interface</a>, and only where the
relevant CSI driver implements the <code>ModifyVolume</code> API.</p><h2 id="the-volumeattributesclass-api">The VolumeAttributesClass API</h2><p>Each VolumeAttributesClass contains the <code>driverName</code> and <code>parameters</code>, which are
used when a PersistentVolume (PV) belonging to the class needs to be dynamically provisioned
or modified.</p><p>The name of a VolumeAttributesClass object is significant and is how users can request a particular class.
Administrators set the name and other parameters of a class when first creating VolumeAttributesClass objects.
While the name of a VolumeAttributesClass object in a <code>PersistentVolumeClaim</code> is mutable, the parameters in an existing class are immutable.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>VolumeAttributesClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>silver<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">driverName</span>:<span style="color:#bbb"> </span>pd.csi.storage.gke.io<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">provisioned-iops</span>:<span style="color:#bbb"> </span><span style="color:#b44">"3000"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">provisioned-throughput</span>:<span style="color:#bbb"> </span><span style="color:#b44">"50"</span><span style="color:#bbb"> 
</span></span></span></code></pre></div><h3 id="provisioner">Provisioner</h3><p>Each VolumeAttributesClass has a provisioner that determines what volume plugin is used for
provisioning PVs. The field <code>driverName</code> must be specified.</p><p>The feature support for VolumeAttributesClass is implemented in
<a href="https://github.com/kubernetes-csi/external-provisioner">kubernetes-csi/external-provisioner</a>.</p><p>You are not restricted to specifying the <a href="https://github.com/kubernetes-csi/external-provisioner">kubernetes-csi/external-provisioner</a>.
You can also run and specify external provisioners,
which are independent programs that follow a specification defined by Kubernetes.
Authors of external provisioners have full discretion over where their code lives, how
the provisioner is shipped, how it needs to be run, what volume plugin it uses, etc.</p><p>To understand how the provisioner works with VolumeAttributesClass, refer to
the <a href="https://kubernetes-csi.github.io/docs/external-provisioner.html">CSI external-provisioner documentation</a>.</p><h3 id="resizer">Resizer</h3><p>Each VolumeAttributesClass has a resizer that determines what volume plugin is used
for modifying PVs. The field <code>driverName</code> must be specified.</p><p>The modifying volume feature support for VolumeAttributesClass is implemented in
<a href="https://github.com/kubernetes-csi/external-resizer">kubernetes-csi/external-resizer</a>.</p><p>For example, an existing PersistentVolumeClaim is using a VolumeAttributesClass named silver:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>PersistentVolumeClaim<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>test-pv-claim<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">spec</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span>…<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">volumeAttributesClassName</span>:<span style="color:#bbb"> </span>silver<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span>…<span style="color:#bbb">
</span></span></span></code></pre></div><p>A new VolumeAttributesClass gold is available in the cluster:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>VolumeAttributesClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>gold<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">driverName</span>:<span style="color:#bbb"> </span>pd.csi.storage.gke.io<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">iops</span>:<span style="color:#bbb"> </span><span style="color:#b44">"4000"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">throughput</span>:<span style="color:#bbb"> </span><span style="color:#b44">"60"</span><span style="color:#bbb">
</span></span></span></code></pre></div><p>The end user can update the PVC with the new VolumeAttributesClass gold and apply:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>PersistentVolumeClaim<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>test-pv-claim<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">spec</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span>…<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">volumeAttributesClassName</span>:<span style="color:#bbb"> </span>gold<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span>…<span style="color:#bbb">
</span></span></span></code></pre></div><p>To understand how the resizer works with VolumeAttributesClass, refer to
the <a href="https://kubernetes-csi.github.io/docs/external-resizer.html">CSI external-resizer documentation</a>.</p><h2 id="parameters">Parameters</h2><p>VolumeAttributeClasses have parameters that describe volumes belonging to them. Different parameters may be accepted
depending on the provisioner or the resizer. For example, the value <code>4000</code>, for the parameter <code>iops</code>,
and the parameter <code>throughput</code> are specific to GCE PD.
When a parameter is omitted, the default is used at volume provisioning.
If a user applies the PVC with a different VolumeAttributesClass with omitted parameters, the default value of
the parameters may be used depending on the CSI driver implementation.
Please refer to the related CSI driver documentation for more details.</p><p>There can be at most 512 parameters defined for a VolumeAttributesClass.
The total length of the parameters object including its keys and values cannot exceed 256 KiB.</p></div>