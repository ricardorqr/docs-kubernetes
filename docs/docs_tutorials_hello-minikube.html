<div class="td-content"><h1 data-pagefind-weight="10">Hello Minikube</h1><p>This tutorial shows you how to run a sample app on Kubernetes using minikube.
The tutorial provides a container image that uses NGINX to echo back all the requests.</p><h2 id="objectives">Objectives</h2><ul><li>Deploy a sample application to minikube.</li><li>Run the app.</li><li>View application logs.</li></ul><h2 id="before-you-begin">Before you begin</h2><p>This tutorial assumes that you have already set up <code>minikube</code>.
See <strong>Step 1</strong> in <a href="https://minikube.sigs.k8s.io/docs/start/">minikube start</a> for installation instructions.<div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>Only execute the instructions in <strong>Step 1, Installation</strong>. The rest is covered on this page.</div></p><p>You also need to install <code>kubectl</code>.
See <a href="/docs/tasks/tools/#kubectl">Install tools</a> for installation instructions.</p><h2 id="create-a-minikube-cluster">Create a minikube cluster</h2><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>minikube start
</span></span></code></pre></div><h2 id="open-the-dashboard">Open the Dashboard</h2><p>Open the Kubernetes dashboard. You can do this two different ways:</p><ul class="nav nav-tabs" id="dashboard" role="tablist"><li class="nav-item"><a data-toggle="tab" class="nav-link active" href="#dashboard-0" role="tab" aria-controls="dashboard-0" aria-selected="true">Launch a browser</a></li><li class="nav-item"><a data-toggle="tab" class="nav-link" href="#dashboard-1" role="tab" aria-controls="dashboard-1">URL copy and paste</a></li></ul><div class="tab-content" id="dashboard"><div id="dashboard-0" class="tab-pane show active" role="tabpanel" aria-labelledby="dashboard-0"><p><p>Open a <strong>new</strong> terminal, and run:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#080;font-style:italic"># Start a new terminal, and leave this running.</span>
</span></span><span style="display:flex"><span>minikube dashboard
</span></span></code></pre></div><p>Now, switch back to the terminal where you ran <code>minikube start</code>.</p><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4><p>The <code>dashboard</code> command enables the dashboard add-on and opens the proxy in the default web browser.
You can create Kubernetes resources on the dashboard such as Deployment and Service.</p><p>To find out how to avoid directly invoking the browser from the terminal and get a URL for the web dashboard, see the "URL copy and paste" tab.</p><p>By default, the dashboard is only accessible from within the internal Kubernetes virtual network.
The <code>dashboard</code> command creates a temporary proxy to make the dashboard accessible from outside the Kubernetes virtual network.</p><p>To stop the proxy, run <code>Ctrl+C</code> to exit the process.
After the command exits, the dashboard remains running in the Kubernetes cluster.
You can run the <code>dashboard</code> command again to create another proxy to access the dashboard.</p></div></p></div><div id="dashboard-1" class="tab-pane" role="tabpanel" aria-labelledby="dashboard-1"><p><p>If you don't want minikube to open a web browser for you, run the <code>dashboard</code> subcommand with the
<code>--url</code> flag. <code>minikube</code> outputs a URL that you can open in the browser you prefer.</p><p>Open a <strong>new</strong> terminal, and run:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#080;font-style:italic"># Start a new terminal, and leave this running.</span>
</span></span><span style="display:flex"><span>minikube dashboard --url
</span></span></code></pre></div><p>Now, you can use this URL and switch back to the terminal where you ran <code>minikube start</code>.</p></p></div></div><h2 id="create-a-deployment">Create a Deployment</h2><p>A Kubernetes <a href="/docs/concepts/workloads/pods/"><em>Pod</em></a> is a group of one or more Containers,
tied together for the purposes of administration and networking. The Pod in this
tutorial has only one Container. A Kubernetes
<a href="/docs/concepts/workloads/controllers/deployment/"><em>Deployment</em></a> checks on the health of your
Pod and restarts the Pod's Container if it terminates. Deployments are the
recommended way to manage the creation and scaling of Pods.</p><ol><li><p>Use the <code>kubectl create</code> command to create a Deployment that manages a Pod. The
Pod runs a Container based on the provided Docker image.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#080;font-style:italic"># Run a test container image that includes a webserver</span>
</span></span><span style="display:flex"><span>kubectl create deployment hello-node --image<span style="color:#666">=</span>registry.k8s.io/e2e-test-images/agnhost:2.53 -- /agnhost netexec --http-port<span style="color:#666">=</span><span style="color:#666">8080</span>
</span></span></code></pre></div></li><li><p>View the Deployment:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl get deployments
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>NAME         READY   UP-TO-DATE   AVAILABLE   AGE
hello-node   1/1     1            1           1m
</code></pre><p>(It may take some time for the pod to become available. If you see "0/1", try again in a few seconds.)</p></li><li><p>View the Pod:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl get pods
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>NAME                          READY     STATUS    RESTARTS   AGE
hello-node-5f76cf6ccf-br9b5   1/1       Running   0          1m
</code></pre></li><li><p>View cluster events:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl get events
</span></span></code></pre></div></li><li><p>View the <code>kubectl</code> configuration:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl config view
</span></span></code></pre></div></li><li><p>View application logs for a container in a pod (replace pod name with the one you got from <code>kubectl get pods</code>).</p><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>Replace <code>hello-node-5f76cf6ccf-br9b5</code> in the <code>kubectl logs</code> command with the name of the pod from the <code>kubectl get pods</code> command output.</div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl logs hello-node-5f76cf6ccf-br9b5
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>I0911 09:19:26.677397       1 log.go:195] Started HTTP server on port 8080
I0911 09:19:26.677586       1 log.go:195] Started UDP server on port  8081
</code></pre></li></ol><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>For more information about <code>kubectl</code> commands, see the <a href="/docs/reference/kubectl/">kubectl overview</a>.</div><h2 id="create-a-service">Create a Service</h2><p>By default, the Pod is only accessible by its internal IP address within the
Kubernetes cluster. To make the <code>hello-node</code> Container accessible from outside the
Kubernetes virtual network, you have to expose the Pod as a
Kubernetes <a href="/docs/concepts/services-networking/service/"><em>Service</em></a>.</p><div class="alert alert-danger" role="alert"><h4 class="alert-heading">Warning:</h4>The agnhost container has a <code>/shell</code> endpoint, which is useful for
debugging, but dangerous to expose to the public internet. Do not run this on an
internet-facing cluster, or a production cluster.</div><ol><li><p>Expose the Pod to the public internet using the <code>kubectl expose</code> command:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl expose deployment hello-node --type<span style="color:#666">=</span>LoadBalancer --port<span style="color:#666">=</span><span style="color:#666">8080</span>
</span></span></code></pre></div><p>The <code>--type=LoadBalancer</code> flag indicates that you want to expose your Service
outside of the cluster.</p><p>The application code inside the test image only listens on TCP port 8080. If you used
<code>kubectl expose</code> to expose a different port, clients could not connect to that other port.</p></li><li><p>View the Service you created:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl get services
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>NAME         TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
hello-node   LoadBalancer   10.108.144.78   &lt;pending&gt;     8080:30369/TCP   21s
kubernetes   ClusterIP      10.96.0.1       &lt;none&gt;        443/TCP          23m
</code></pre><p>On cloud providers that support load balancers,
an external IP address would be provisioned to access the Service. On minikube,
the <code>LoadBalancer</code> type makes the Service accessible through the <code>minikube service</code>
command.</p></li><li><p>Run the following command:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>minikube service hello-node
</span></span></code></pre></div><p>This opens up a browser window that serves your app and shows the app's response.</p></li></ol><h2 id="enable-addons">Enable addons</h2><p>The minikube tool includes a set of built-in <a class="glossary-tooltip" title="Resources that extend the functionality of Kubernetes." data-toggle="tooltip" data-placement="top" href="/docs/concepts/cluster-administration/addons/" target="_blank" aria-label="addons">addons</a> that can be enabled, disabled and opened in the local Kubernetes environment.</p><ol><li><p>List the currently supported addons:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>minikube addons list
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>addon-manager: enabled
dashboard: enabled
default-storageclass: enabled
efk: disabled
freshpod: disabled
gvisor: disabled
helm-tiller: disabled
ingress: disabled
ingress-dns: disabled
logviewer: disabled
metrics-server: disabled
nvidia-driver-installer: disabled
nvidia-gpu-device-plugin: disabled
registry: disabled
registry-creds: disabled
storage-provisioner: enabled
storage-provisioner-gluster: disabled
</code></pre></li><li><p>Enable an addon, for example, <code>metrics-server</code>:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>minikube addons <span style="color:#a2f">enable</span> metrics-server
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>The 'metrics-server' addon is enabled
</code></pre></li><li><p>View the Pod and Service you created by installing that addon:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl get pod,svc -n kube-system
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>NAME                                        READY     STATUS    RESTARTS   AGE
pod/coredns-5644d7b6d9-mh9ll                1/1       Running   0          34m
pod/coredns-5644d7b6d9-pqd2t                1/1       Running   0          34m
pod/metrics-server-67fb648c5                1/1       Running   0          26s
pod/etcd-minikube                           1/1       Running   0          34m
pod/influxdb-grafana-b29w8                  2/2       Running   0          26s
pod/kube-addon-manager-minikube             1/1       Running   0          34m
pod/kube-apiserver-minikube                 1/1       Running   0          34m
pod/kube-controller-manager-minikube        1/1       Running   0          34m
pod/kube-proxy-rnlps                        1/1       Running   0          34m
pod/kube-scheduler-minikube                 1/1       Running   0          34m
pod/storage-provisioner                     1/1       Running   0          34m

NAME                           TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)             AGE
service/metrics-server         ClusterIP   10.96.241.45    &lt;none&gt;        80/TCP              26s
service/kube-dns               ClusterIP   10.96.0.10      &lt;none&gt;        53/UDP,53/TCP       34m
service/monitoring-grafana     NodePort    10.99.24.54     &lt;none&gt;        80:30002/TCP        26s
service/monitoring-influxdb    ClusterIP   10.111.169.94   &lt;none&gt;        8083/TCP,8086/TCP   26s
</code></pre></li><li><p>Check the output from <code>metrics-server</code>:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl top pods
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>NAME                         CPU(cores)   MEMORY(bytes)   
hello-node-ccf4b9788-4jn97   1m           6Mi             
</code></pre><p>If you see the following message, wait, and try again:</p><pre tabindex="0"><code>error: Metrics API not available
</code></pre></li><li><p>Disable <code>metrics-server</code>:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>minikube addons disable metrics-server
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>metrics-server was successfully disabled
</code></pre></li></ol><h2 id="clean-up">Clean up</h2><p>Now you can clean up the resources you created in your cluster:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl delete service hello-node
</span></span><span style="display:flex"><span>kubectl delete deployment hello-node
</span></span></code></pre></div><p>Stop the Minikube cluster</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>minikube stop
</span></span></code></pre></div><p>Optionally, delete the Minikube VM:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#080;font-style:italic"># Optional</span>
</span></span><span style="display:flex"><span>minikube delete
</span></span></code></pre></div><p>If you want to use minikube again to learn more about Kubernetes, you don't need to delete it.</p><h2 id="conclusion">Conclusion</h2><p>This page covered the basic aspects to get a minikube cluster up and running. You are now ready to deploy applications.</p><h2 id="what-s-next">What's next</h2><ul><li>Tutorial to <em><a href="/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/">deploy your first app on Kubernetes with kubectl</a></em>.</li><li>Learn more about <a href="/docs/concepts/workloads/controllers/deployment/">Deployment objects</a>.</li><li>Learn more about <a href="/docs/tasks/run-application/run-stateless-application-deployment/">Deploying applications</a>.</li><li>Learn more about <a href="/docs/concepts/services-networking/service/">Service objects</a>.</li></ul></div>