<div class="td-content"><h1 data-pagefind-weight="10">Managing Secrets using kubectl</h1><div class="lead">Creating Secret objects using kubectl command line.</div><p>This page shows you how to create, edit, manage, and delete Kubernetes
<a class="glossary-tooltip" title="Stores sensitive information, such as passwords, OAuth tokens, and ssh keys." data-toggle="tooltip" data-placement="top" href="/docs/concepts/configuration/secret/" target="_blank" aria-label="Secrets">Secrets</a> using the <code>kubectl</code>
command-line tool.</p><h2 id="before-you-begin">Before you begin</h2><p>You need to have a Kubernetes cluster, and the kubectl command-line tool must
be configured to communicate with your cluster. It is recommended to run this tutorial on a cluster with at least two nodes that are not acting as control plane hosts. If you do not already have a
cluster, you can create one by using
<a href="https://minikube.sigs.k8s.io/docs/tutorials/multi_node/">minikube</a>
or you can use one of these Kubernetes playgrounds:</p><ul><li><a href="https://labs.iximiuz.com/playgrounds?category=kubernetes&amp;filter=all">iximiuz Labs</a></li><li><a href="https://killercoda.com/playgrounds/scenario/kubernetes">Killercoda</a></li><li><a href="https://kodekloud.com/public-playgrounds">KodeKloud</a></li><li><a href="https://labs.play-with-k8s.com/">Play with Kubernetes</a></li></ul><h2 id="create-a-secret">Create a Secret</h2><p>A <code>Secret</code> object stores sensitive data such as credentials
used by Pods to access services. For example, you might need a Secret to store
the username and password needed to access a database.</p><p>You can create the Secret by passing the raw data in the command, or by storing
the credentials in files that you pass in the command. The following commands
create a Secret that stores the username <code>admin</code> and the password <code>S!B\*d$zDsb=</code>.</p><h3 id="use-raw-data">Use raw data</h3><p>Run the following command:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl create secret generic db-user-pass <span style="color:#b62;font-weight:700">\
</span></span></span><span style="display:flex"><span><span style="color:#b62;font-weight:700"/>    --from-literal<span style="color:#666">=</span><span style="color:#b8860b">username</span><span style="color:#666">=</span>admin <span style="color:#b62;font-weight:700">\
</span></span></span><span style="display:flex"><span><span style="color:#b62;font-weight:700"/>    --from-literal<span style="color:#666">=</span><span style="color:#b8860b">password</span><span style="color:#666">=</span><span style="color:#b44">'S!B\*d$zDsb='</span>
</span></span></code></pre></div><p>You must use single quotes <code>''</code> to escape special characters such as <code>$</code>, <code>\</code>,
<code>*</code>, <code>=</code>, and <code>!</code> in your strings. If you don't, your shell will interpret these
characters.</p><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>The <code>stringData</code> field for a Secret does not work well with server-side apply.</div><h3 id="use-source-files">Use source files</h3><ol><li><p>Store the credentials in files:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#a2f">echo</span> -n <span style="color:#b44">'admin'</span> &gt; ./username.txt
</span></span><span style="display:flex"><span><span style="color:#a2f">echo</span> -n <span style="color:#b44">'S!B\*d$zDsb='</span> &gt; ./password.txt
</span></span></code></pre></div><p>The <code>-n</code> flag ensures that the generated files do not have an extra newline
character at the end of the text. This is important because when <code>kubectl</code>
reads a file and encodes the content into a base64 string, the extra
newline character gets encoded too. You do not need to escape special
characters in strings that you include in a file.</p></li><li><p>Pass the file paths in the <code>kubectl</code> command:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl create secret generic db-user-pass <span style="color:#b62;font-weight:700">\
</span></span></span><span style="display:flex"><span><span style="color:#b62;font-weight:700"/>    --from-file<span style="color:#666">=</span>./username.txt <span style="color:#b62;font-weight:700">\
</span></span></span><span style="display:flex"><span><span style="color:#b62;font-weight:700"/>    --from-file<span style="color:#666">=</span>./password.txt
</span></span></code></pre></div><p>The default key name is the file name. You can optionally set the key name
using <code>--from-file=[key=]source</code>. For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl create secret generic db-user-pass <span style="color:#b62;font-weight:700">\
</span></span></span><span style="display:flex"><span><span style="color:#b62;font-weight:700"/>    --from-file<span style="color:#666">=</span><span style="color:#b8860b">username</span><span style="color:#666">=</span>./username.txt <span style="color:#b62;font-weight:700">\
</span></span></span><span style="display:flex"><span><span style="color:#b62;font-weight:700"/>    --from-file<span style="color:#666">=</span><span style="color:#b8860b">password</span><span style="color:#666">=</span>./password.txt
</span></span></code></pre></div></li></ol><p>With either method, the output is similar to:</p><pre tabindex="0"><code>secret/db-user-pass created
</code></pre><h3 id="verify-the-secret">Verify the Secret</h3><p>Check that the Secret was created:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl get secrets
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>NAME              TYPE       DATA      AGE
db-user-pass      Opaque     2         51s
</code></pre><p>View the details of the Secret:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl describe secret db-user-pass
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>Name:            db-user-pass
Namespace:       default
Labels:          &lt;none&gt;
Annotations:     &lt;none&gt;

Type:            Opaque

Data
====
password:    12 bytes
username:    5 bytes
</code></pre><p>The commands <code>kubectl get</code> and <code>kubectl describe</code> avoid showing the contents
of a <code>Secret</code> by default. This is to protect the <code>Secret</code> from being exposed
accidentally, or from being stored in a terminal log.</p><h3 id="decoding-secret">Decode the Secret</h3><ol><li><p>View the contents of the Secret you created:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl get secret db-user-pass -o <span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">'{.data}'</span>
</span></span></code></pre></div><p>The output is similar to:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="display:flex"><span>{ <span style="color:green;font-weight:700">"password"</span>: <span style="color:#b44">"UyFCXCpkJHpEc2I9"</span>, <span style="color:green;font-weight:700">"username"</span>: <span style="color:#b44">"YWRtaW4="</span> }
</span></span></code></pre></div></li><li><p>Decode the <code>password</code> data:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#a2f">echo</span> <span style="color:#b44">'UyFCXCpkJHpEc2I9'</span> | base64 --decode
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex="0"><code>S!B\*d$zDsb=
</code></pre><div class="alert alert-caution" role="alert"><h4 class="alert-heading">Caution:</h4>This is an example for documentation purposes. In practice,
this method could cause the command with the encoded data to be stored in
your shell history. Anyone with access to your computer could find the
command and decode the secret. A better approach is to combine the view and
decode commands.</div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl get secret db-user-pass -o <span style="color:#b8860b">jsonpath</span><span style="color:#666">=</span><span style="color:#b44">'{.data.password}'</span> | base64 --decode
</span></span></code></pre></div></li></ol><h2 id="edit-secret">Edit a Secret</h2><p>You can edit an existing <code>Secret</code> object unless it is
<a href="/docs/concepts/configuration/secret/#secret-immutable">immutable</a>. To edit a
Secret, run the following command:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl edit secrets &lt;secret-name&gt;
</span></span></code></pre></div><p>This opens your default editor and allows you to update the base64 encoded
Secret values in the <code>data</code> field, such as in the following example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:#080;font-style:italic"># Please edit the object below. Lines beginning with a '#' will be ignored,</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:#080;font-style:italic"># and an empty file will abort the edit. If an error occurs while saving this file, it will be</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:#080;font-style:italic"># reopened with the relevant failures.</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:#080;font-style:italic">#</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">data</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">password</span>:<span style="color:#bbb"> </span>UyFCXCpkJHpEc2I9<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">username</span>:<span style="color:#bbb"> </span>YWRtaW4=<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>Secret<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">creationTimestamp</span>:<span style="color:#bbb"> </span><span style="color:#b44">"2022-06-28T17:44:13Z"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>db-user-pass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">namespace</span>:<span style="color:#bbb"> </span>default<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">resourceVersion</span>:<span style="color:#bbb"> </span><span style="color:#b44">"12708504"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">uid</span>:<span style="color:#bbb"> </span>91becd59-78fa-4c85-823f-6d44436242ac<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">type</span>:<span style="color:#bbb"> </span>Opaque<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="clean-up">Clean up</h2><p>To delete a Secret, run the following command:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl delete secret db-user-pass
</span></span></code></pre></div><h2 id="what-s-next">What's next</h2><ul><li>Read more about the <a href="/docs/concepts/configuration/secret/">Secret concept</a></li><li>Learn how to <a href="/docs/tasks/configmap-secret/managing-secret-using-config-file/">manage Secrets using config file</a></li><li>Learn how to <a href="/docs/tasks/configmap-secret/managing-secret-using-kustomize/">manage Secrets using kustomize</a></li></ul></div>