<div class="td-content"><h1 data-pagefind-weight="10">Linux Kernel Version Requirements</h1><div class="alert alert-secondary callout third-party-content" role="alert"><strong>Note:</strong>â€ˆThis section links to third party projects that provide functionality required by Kubernetes. The Kubernetes project authors aren't responsible for these projects, which are listed alphabetically. To add a project to this list, read the <a href="/docs/contribute/style/content-guide/#third-party-content">content guide</a> before submitting a change. <a href="#third-party-content-disclaimer">More information.</a></div><p>Many features rely on specific kernel functionalities and have minimum kernel version requirements.
However, relying solely on kernel version numbers may not be sufficient
for certain operating system distributions,
as maintainers for distributions such as RHEL, Ubuntu and SUSE often backport selected features
to older kernel releases (retaining the older kernel version).</p><h2 id="pod-sysctls">Pod sysctls</h2><p>On Linux, the <code>sysctl()</code> system call configures kernel parameters at run time. There is a command
line tool named <code>sysctl</code> that you can use to configure these parameters, and many are exposed via
the <code>proc</code> filesystem.</p><p>Some sysctls are only available if you have a modern enough kernel.</p><p>The following sysctls have a minimal kernel version requirement,
and are supported in the <a href="/docs/tasks/administer-cluster/sysctl-cluster/#safe-and-unsafe-sysctls">safe set</a>:</p><ul><li><code>net.ipv4.ip_local_reserved_ports</code> (since Kubernetes 1.27, needs kernel 3.16+);</li><li><code>net.ipv4.tcp_keepalive_time</code> (since Kubernetes 1.29, needs kernel 4.5+);</li><li><code>net.ipv4.tcp_fin_timeout</code> (since Kubernetes 1.29, needs kernel 4.6+);</li><li><code>net.ipv4.tcp_keepalive_intvl</code> (since Kubernetes 1.29, needs kernel 4.5+);</li><li><code>net.ipv4.tcp_keepalive_probes</code> (since Kubernetes 1.29, needs kernel 4.5+);</li><li><code>net.ipv4.tcp_syncookies</code> (namespaced since kernel 4.6+).</li><li><code>net.ipv4.tcp_rmem</code> (since Kubernetes 1.32, needs kernel 4.15+).</li><li><code>net.ipv4.tcp_wmem</code> (since Kubernetes 1.32, needs kernel 4.15+).</li><li><code>net.ipv4.vs.conn_reuse_mode</code> (used in <code>ipvs</code> proxy mode, needs kernel 4.1+);</li></ul><h3 id="kube-proxy-nftables-proxy-mode">kube proxy <code>nftables</code> proxy mode</h3><p>For Kubernetes 1.34, the
<a href="/docs/reference/networking/virtual-ips/#proxy-mode-nftables"><code>nftables</code> mode</a> of kube-proxy requires
version 1.0.1 or later
of the nft command-line tool, as well as kernel 5.13 or later.</p><p>For testing/development purposes, you can use older kernels, as far back as 5.4 if you set the
<code>nftables.skipKernelVersionCheck</code> option in the kube-proxy config.
But this is not recommended in production since it may cause problems with other nftables
users on the system.</p><h2 id="version-2-control-groups">Version 2 control groups</h2><p>Kubernetes cgroup v1 support is in maintained mode starting from Kubernetes v1.31; using cgroup v2
is recommended.
In <a href="https://github.com/torvalds/linux/commit/4a7e89c5ec0238017a757131eb9ab8dc111f961c">Linux 5.8</a>, the system-level <code>cpu.stat</code> file was added to the root cgroup for convenience.</p><p>In runc document, Kernel older than 5.2 is not recommended due to lack of freezer.</p><h2 id="requirements-psi">Pressure Stall Information (PSI)</h2><p><a href="/docs/reference/instrumentation/understand-psi-metrics/">Pressure Stall Information</a> is supported in Linux kernel versions 4.20 and up, but requires the following configuration:</p><ul><li>The kernel must be compiled with the <code>CONFIG_PSI=y</code> option. Most modern distributions enable this by default. You can check your kernel's configuration by running <code>zgrep CONFIG_PSI /proc/config.gz</code>.</li><li>Some Linux distributions may compile PSI into the kernel but disable it by default. If so, you need to enable it at boot time by adding the <code>psi=1</code> parameter to the kernel command line.</li></ul><h2 id="requirements-other">Other kernel requirements</h2><p>Some features may depend on new kernel functionalities and have specific kernel requirements:</p><ol><li><a href="/docs/concepts/storage/volumes/#recursive-read-only-mounts">Recursive read only mount</a>:
This is implemented by applying the <code>MOUNT_ATTR_RDONLY</code> attribute with the <code>AT_RECURSIVE</code> flag
using <code>mount_setattr</code>(2) added in Linux kernel v5.12.</li><li>Pod user namespace support requires minimal kernel version 6.5+, according to
<a href="https://github.com/kubernetes/enhancements/blob/master/keps/sig-node/127-user-namespaces/README.md">KEP-127</a>.</li><li>For <a href="/docs/concepts/architecture/nodes/#swap-memory">node system swap</a>, tmpfs set to <code>noswap</code>
is not supported until kernel 6.3.</li></ol><h2 id="linux-kernel-long-term-maintenance">Linux kernel long term maintenance</h2><p>Active kernel releases can be found in <a href="https://www.kernel.org/category/releases.html">kernel.org</a>.</p><p>There are usually several <em>long term maintenance</em> kernel releases provided for the purposes of backporting
bug fixes for older kernel trees. Only important bug fixes are applied to such kernels and they don't
usually see very frequent releases, especially for older trees.
See the Linux kernel website for the <a href="https://www.kernel.org/category/releases.html">list of releases</a>
in the <em>Longterm</em> category.</p><h2 id="what-s-next">What's next</h2><ul><li>See <a href="/docs/tasks/administer-cluster/sysctl-cluster/">sysctls</a> for more details.</li><li>Allow running kube-proxy with in <a href="/docs/reference/networking/virtual-ips/#proxy-mode-nftables">nftables mode</a>.</li><li>Read more information in <a href="/docs/concepts/architecture/cgroups/">cgroups v2</a>.</li></ul></div>