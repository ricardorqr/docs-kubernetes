<div class="td-content"><h1 data-pagefind-weight="10">Developing Cloud Controller Manager</h1><div class="feature-state-notice feature-beta"><span class="feature-state-name">FEATURE STATE:</span>
<code>Kubernetes v1.11 [beta]</code></div><p><p>The cloud-controller-manager is a Kubernetes <a class="glossary-tooltip" title="The container orchestration layer that exposes the API and interfaces to define, deploy, and manage the lifecycle of containers." data-toggle="tooltip" data-placement="top" href="/docs/reference/glossary/?all=true#term-control-plane" target="_blank" aria-label="control plane">control plane</a> component
that embeds cloud-specific control logic. The cloud controller manager lets you link your
cluster into your cloud provider's API, and separates out the components that interact
with that cloud platform from components that only interact with your cluster.</p></p><p>By decoupling the interoperability logic between Kubernetes and the underlying cloud
infrastructure, the cloud-controller-manager component enables cloud providers to release
features at a different pace compared to the main Kubernetes project.</p><h2 id="background">Background</h2><p>Since cloud providers develop and release at a different pace compared to the Kubernetes project, abstracting the provider-specific code to the <code>cloud-controller-manager</code> binary allows cloud vendors to evolve independently from the core Kubernetes code.</p><p>The Kubernetes project provides skeleton cloud-controller-manager code with Go interfaces to allow you (or your cloud provider) to plug in your own implementations. This means that a cloud provider can implement a cloud-controller-manager by importing packages from Kubernetes core; each cloudprovider will register their own code by calling <code>cloudprovider.RegisterCloudProvider</code> to update a global variable of available cloud providers.</p><h2 id="developing">Developing</h2><h3 id="out-of-tree">Out of tree</h3><p>To build an out-of-tree cloud-controller-manager for your cloud:</p><ol><li>Create a go package with an implementation that satisfies <a href="https://github.com/kubernetes/cloud-provider/blob/master/cloud.go">cloudprovider.Interface</a>.</li><li>Use <a href="https://github.com/kubernetes/kubernetes/blob/master/cmd/cloud-controller-manager/main.go"><code>main.go</code> in cloud-controller-manager</a> from Kubernetes core as a template for your <code>main.go</code>. As mentioned above, the only difference should be the cloud package that will be imported.</li><li>Import your cloud package in <code>main.go</code>, ensure your package has an <code>init</code> block to run <a href="https://github.com/kubernetes/cloud-provider/blob/master/plugins.go"><code>cloudprovider.RegisterCloudProvider</code></a>.</li></ol><p>Many cloud providers publish their controller manager code as open source. If you are creating
a new cloud-controller-manager from scratch, you could take an existing out-of-tree cloud
controller manager as your starting point.</p><h3 id="in-tree">In tree</h3><p>For in-tree cloud providers, you can run the in-tree cloud controller manager as a <a class="glossary-tooltip" title="Ensures a copy of a Pod is running across a set of nodes in a cluster." data-toggle="tooltip" data-placement="top" href="/docs/concepts/workloads/controllers/daemonset" target="_blank" aria-label="DaemonSet">DaemonSet</a> in your cluster. See <a href="/docs/tasks/administer-cluster/running-cloud-controller/">Cloud Controller Manager Administration</a> for more details.</p></div>