<div class="td-content"><h1 data-pagefind-weight="10">Use an HTTP Proxy to Access the Kubernetes API</h1><p>This page shows how to use an HTTP proxy to access the Kubernetes API.</p><h2 id="before-you-begin">Before you begin</h2><p><p>You need to have a Kubernetes cluster, and the kubectl command-line tool must
be configured to communicate with your cluster. It is recommended to run this tutorial on a cluster with at least two nodes that are not acting as control plane hosts. If you do not already have a
cluster, you can create one by using
<a href="https://minikube.sigs.k8s.io/docs/tutorials/multi_node/">minikube</a>
or you can use one of these Kubernetes playgrounds:</p><ul><li><a href="https://labs.iximiuz.com/playgrounds?category=kubernetes&amp;filter=all">iximiuz Labs</a></li><li><a href="https://killercoda.com/playgrounds/scenario/kubernetes">Killercoda</a></li><li><a href="https://kodekloud.com/public-playgrounds">KodeKloud</a></li><li><a href="https://labs.play-with-k8s.com/">Play with Kubernetes</a></li></ul><p>To check the version, enter <code>kubectl version</code>.</p></p><p>If you do not already have an application running in your cluster, start
a Hello world application by entering this command:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl create deployment hello-app --image<span style="color:#666">=</span>gcr.io/google-samples/hello-app:2.0 --port<span style="color:#666">=</span><span style="color:#666">8080</span>
</span></span></code></pre></div><h2 id="using-kubectl-to-start-a-proxy-server">Using kubectl to start a proxy server</h2><p>This command starts a proxy to the Kubernetes API server:</p><pre><code>kubectl proxy --port=8080
</code></pre><h2 id="exploring-the-kubernetes-api">Exploring the Kubernetes API</h2><p>When the proxy server is running, you can explore the API using <code>curl</code>, <code>wget</code>,
or a browser.</p><p>Get the API versions:</p><pre><code>curl http://localhost:8080/api/
</code></pre><p>The output should look similar to this:</p><pre><code>{
  "kind": "APIVersions",
  "versions": [
    "v1"
  ],
  "serverAddressByClientCIDRs": [
    {
      "clientCIDR": "0.0.0.0/0",
      "serverAddress": "10.0.2.15:8443"
    }
  ]
}
</code></pre><p>Get a list of pods:</p><pre><code>curl http://localhost:8080/api/v1/namespaces/default/pods
</code></pre><p>The output should look similar to this:</p><pre><code>{
  "kind": "PodList",
  "apiVersion": "v1",
  "metadata": {
    "resourceVersion": "33074"
  },
  "items": [
    {
      "metadata": {
        "name": "kubernetes-bootcamp-2321272333-ix8pt",
        "generateName": "kubernetes-bootcamp-2321272333-",
        "namespace": "default",
        "uid": "ba21457c-6b1d-11e6-85f7-1ef9f1dab92b",
        "resourceVersion": "33003",
        "creationTimestamp": "2016-08-25T23:43:30Z",
        "labels": {
          "pod-template-hash": "2321272333",
          "run": "kubernetes-bootcamp"
        },
        ...
}
</code></pre><h2 id="what-s-next">What's next</h2><p>Learn more about <a href="/docs/reference/generated/kubectl/kubectl-commands#proxy">kubectl proxy</a>.</p></div>