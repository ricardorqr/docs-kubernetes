<div class="td-content"><h1 data-pagefind-weight="10">Storage Classes</h1><p>This document describes the concept of a StorageClass in Kubernetes. Familiarity
with <a href="/docs/concepts/storage/volumes/">volumes</a> and
<a href="/docs/concepts/storage/persistent-volumes/">persistent volumes</a> is suggested.</p><p>A StorageClass provides a way for administrators to describe the <em>classes</em> of
storage they offer. Different classes might map to quality-of-service levels,
or to backup policies, or to arbitrary policies determined by the cluster
administrators. Kubernetes itself is unopinionated about what classes
represent.</p><p>The Kubernetes concept of a storage class is similar to “profiles” in some other
storage system designs.</p><h2 id="storageclass-objects">StorageClass objects</h2><p>Each StorageClass contains the fields <code>provisioner</code>, <code>parameters</code>, and
<code>reclaimPolicy</code>, which are used when a PersistentVolume belonging to the
class needs to be dynamically provisioned to satisfy a PersistentVolumeClaim (PVC).</p><p>The name of a StorageClass object is significant, and is how users can
request a particular class. Administrators set the name and other parameters
of a class when first creating StorageClass objects.</p><p>As an administrator, you can specify a default StorageClass that applies to any PVCs that
don't request a specific class. For more details, see the
<a href="/docs/concepts/storage/persistent-volumes/#persistentvolumeclaims">PersistentVolumeClaim concept</a>.</p><p>Here's an example of a StorageClass:</p><div class="highlight code-sample"><div class="copy-code-icon"><a href="https://raw.githubusercontent.com/kubernetes/website/main/content/en/examples/storage/storageclass-low-latency.yaml" download="storage/storageclass-low-latency.yaml"><code>storage/storageclass-low-latency.yaml</code>
</a><img src="/images/copycode.svg" class="icon-copycode" onclick="copyCode(&quot;storage-storageclass-low-latency-yaml&quot;)" title="Copy storage/storageclass-low-latency.yaml to clipboard"/></div><div class="includecode" id="storage-storageclass-low-latency-yaml"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>StorageClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>low-latency<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">annotations</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:green;font-weight:700">storageclass.kubernetes.io/is-default-class</span>:<span style="color:#bbb"> </span><span style="color:#b44">"false"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">provisioner</span>:<span style="color:#bbb"> </span>csi-driver.example-vendor.example<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">reclaimPolicy</span>:<span style="color:#bbb"> </span>Retain<span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># default value is Delete</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">allowVolumeExpansion</span>:<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:700">true</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">mountOptions</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span>- discard<span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># this might enable UNMAP / TRIM at the block storage layer</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">volumeBindingMode</span>:<span style="color:#bbb"> </span>WaitForFirstConsumer<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">guaranteedReadWriteLatency</span>:<span style="color:#bbb"> </span><span style="color:#b44">"true"</span><span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># provider-specific</span><span style="color:#bbb">
</span></span></span></code></pre></div></div></div><h2 id="default-storageclass">Default StorageClass</h2><p>You can mark a StorageClass as the default for your cluster.
For instructions on setting the default StorageClass, see
<a href="/docs/tasks/administer-cluster/change-default-storage-class/">Change the default StorageClass</a>.</p><p>When a PVC does not specify a <code>storageClassName</code>, the default StorageClass is
used.</p><p>If you set the
<a href="/docs/reference/labels-annotations-taints/#storageclass-kubernetes-io-is-default-class"><code>storageclass.kubernetes.io/is-default-class</code></a>
annotation to true on more than one StorageClass in your cluster, and you then
create a PersistentVolumeClaim with no <code>storageClassName</code> set, Kubernetes
uses the most recently created default StorageClass.</p><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>You should try to only have one StorageClass in your cluster that is
marked as the default. The reason that Kubernetes allows you to have
multiple default StorageClasses is to allow for seamless migration.</div><p>You can create a PersistentVolumeClaim without specifying a <code>storageClassName</code>
for the new PVC, and you can do so even when no default StorageClass exists
in your cluster. In this case, the new PVC creates as you defined it, and the
<code>storageClassName</code> of that PVC remains unset until a default becomes available.</p><p>You can have a cluster without any default StorageClass. If you don't mark any
StorageClass as default (and one hasn't been set for you by, for example, a cloud provider),
then Kubernetes cannot apply that defaulting for PersistentVolumeClaims that need
it.</p><p>If or when a default StorageClass becomes available, the control plane identifies any
existing PVCs without <code>storageClassName</code>. For the PVCs that either have an empty
value for <code>storageClassName</code> or do not have this key, the control plane then
updates those PVCs to set <code>storageClassName</code> to match the new default StorageClass.
If you have an existing PVC where the <code>storageClassName</code> is <code>""</code>, and you configure
a default StorageClass, then this PVC will not get updated.</p><p>In order to keep binding to PVs with <code>storageClassName</code> set to <code>""</code>
(while a default StorageClass is present), you need to set the <code>storageClassName</code>
of the associated PVC to <code>""</code>.</p><h2 id="provisioner">Provisioner</h2><p>Each StorageClass has a provisioner that determines what volume plugin is used
for provisioning PVs. This field must be specified.</p><table><thead><tr><th style="text-align:left">Volume Plugin</th><th style="text-align:center">Internal Provisioner</th><th style="text-align:center">Config Example</th></tr></thead><tbody><tr><td style="text-align:left">AzureFile</td><td style="text-align:center">✓</td><td style="text-align:center"><a href="#azure-file">Azure File</a></td></tr><tr><td style="text-align:left">CephFS</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td style="text-align:left">FC</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td style="text-align:left">FlexVolume</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td style="text-align:left">iSCSI</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td style="text-align:left">Local</td><td style="text-align:center">-</td><td style="text-align:center"><a href="#local">Local</a></td></tr><tr><td style="text-align:left">NFS</td><td style="text-align:center">-</td><td style="text-align:center"><a href="#nfs">NFS</a></td></tr><tr><td style="text-align:left">PortworxVolume</td><td style="text-align:center">✓</td><td style="text-align:center"><a href="#portworx-volume">Portworx Volume</a></td></tr><tr><td style="text-align:left">RBD</td><td style="text-align:center">-</td><td style="text-align:center"><a href="#ceph-rbd">Ceph RBD</a></td></tr><tr><td style="text-align:left">VsphereVolume</td><td style="text-align:center">✓</td><td style="text-align:center"><a href="#vsphere">vSphere</a></td></tr></tbody></table><p>You are not restricted to specifying the "internal" provisioners
listed here (whose names are prefixed with "kubernetes.io" and shipped
alongside Kubernetes). You can also run and specify external provisioners,
which are independent programs that follow a <a href="https://git.k8s.io/design-proposals-archive/storage/volume-provisioning.md">specification</a>
defined by Kubernetes. Authors of external provisioners have full discretion
over where their code lives, how the provisioner is shipped, how it needs to be
run, what volume plugin it uses (including Flex), etc. The repository
<a href="https://github.com/kubernetes-sigs/sig-storage-lib-external-provisioner">kubernetes-sigs/sig-storage-lib-external-provisioner</a>
houses a library for writing external provisioners that implements the bulk of
the specification. Some external provisioners are listed under the repository
<a href="https://github.com/kubernetes-sigs/sig-storage-lib-external-provisioner">kubernetes-sigs/sig-storage-lib-external-provisioner</a>.</p><p>For example, NFS doesn't provide an internal provisioner, but an external
provisioner can be used. There are also cases when 3rd party storage
vendors provide their own external provisioner.</p><h2 id="reclaim-policy">Reclaim policy</h2><p>PersistentVolumes that are dynamically created by a StorageClass will have the
<a href="/docs/concepts/storage/persistent-volumes/#reclaiming">reclaim policy</a>
specified in the <code>reclaimPolicy</code> field of the class, which can be
either <code>Delete</code> or <code>Retain</code>. If no <code>reclaimPolicy</code> is specified when a
StorageClass object is created, it will default to <code>Delete</code>.</p><p>PersistentVolumes that are created manually and managed via a StorageClass will have
whatever reclaim policy they were assigned at creation.</p><h2 id="allow-volume-expansion">Volume expansion</h2><p>PersistentVolumes can be configured to be expandable. This allows you to resize the
volume by editing the corresponding PVC object, requesting a new larger amount of
storage.</p><p>The following types of volumes support volume expansion, when the underlying
StorageClass has the field <code>allowVolumeExpansion</code> set to true.</p><table><caption style="display:none">Table of Volume types and the version of Kubernetes they require</caption><thead><tr><th style="text-align:left">Volume type</th><th style="text-align:left">Required Kubernetes version for volume expansion</th></tr></thead><tbody><tr><td style="text-align:left">Azure File</td><td style="text-align:left">1.11</td></tr><tr><td style="text-align:left">CSI</td><td style="text-align:left">1.24</td></tr><tr><td style="text-align:left">FlexVolume</td><td style="text-align:left">1.13</td></tr><tr><td style="text-align:left">Portworx</td><td style="text-align:left">1.11</td></tr><tr><td style="text-align:left">rbd</td><td style="text-align:left">1.11</td></tr></tbody></table><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>You can only use the volume expansion feature to grow a Volume, not to shrink it.</div><h2 id="mount-options">Mount options</h2><p>PersistentVolumes that are dynamically created by a StorageClass will have the
mount options specified in the <code>mountOptions</code> field of the class.</p><p>If the volume plugin does not support mount options but mount options are
specified, provisioning will fail. Mount options are <strong>not</strong> validated on either
the class or PV. If a mount option is invalid, the PV mount fails.</p><h2 id="volume-binding-mode">Volume binding mode</h2><p>The <code>volumeBindingMode</code> field controls when
<a href="/docs/concepts/storage/persistent-volumes/#provisioning">volume binding and dynamic provisioning</a>
should occur. When unset, <code>Immediate</code> mode is used by default.</p><p>The <code>Immediate</code> mode indicates that volume binding and dynamic
provisioning occurs once the PersistentVolumeClaim is created. For storage
backends that are topology-constrained and not globally accessible from all Nodes
in the cluster, PersistentVolumes will be bound or provisioned without knowledge of the Pod's scheduling
requirements. This may result in unschedulable Pods.</p><p>A cluster administrator can address this issue by specifying the <code>WaitForFirstConsumer</code> mode which
will delay the binding and provisioning of a PersistentVolume until a Pod using the PersistentVolumeClaim is created.
PersistentVolumes will be selected or provisioned conforming to the topology that is
specified by the Pod's scheduling constraints. These include, but are not limited to, <a href="/docs/concepts/configuration/manage-resources-containers/">resource
requirements</a>,
<a href="/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector">node selectors</a>,
<a href="/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity">pod affinity and
anti-affinity</a>,
and <a href="/docs/concepts/scheduling-eviction/taint-and-toleration/">taints and tolerations</a>.</p><p>The following plugins support <code>WaitForFirstConsumer</code> with dynamic provisioning:</p><ul><li>CSI volumes, provided that the specific CSI driver supports this</li></ul><p>The following plugins support <code>WaitForFirstConsumer</code> with pre-created PersistentVolume binding:</p><ul><li>CSI volumes, provided that the specific CSI driver supports this</li><li><a href="#local"><code>local</code></a></li></ul><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4><p>If you choose to use <code>WaitForFirstConsumer</code>, do not use <code>nodeName</code> in the Pod spec
to specify node affinity.
If <code>nodeName</code> is used in this case, the scheduler will be bypassed and PVC will remain in <code>pending</code> state.</p><p>Instead, you can use node selector for <code>kubernetes.io/hostname</code>:</p></div><div class="highlight code-sample"><div class="copy-code-icon"><a href="https://raw.githubusercontent.com/kubernetes/website/main/content/en/examples/storage/storageclass/pod-volume-binding.yaml" download="storage/storageclass/pod-volume-binding.yaml"><code>storage/storageclass/pod-volume-binding.yaml</code>
</a><img src="/images/copycode.svg" class="icon-copycode" onclick="copyCode(&quot;storage-storageclass-pod-volume-binding-yaml&quot;)" title="Copy storage/storageclass/pod-volume-binding.yaml to clipboard"/></div><div class="includecode" id="storage-storageclass-pod-volume-binding-yaml"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>Pod<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>task-pv-pod<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">spec</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">nodeSelector</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:green;font-weight:700">kubernetes.io/hostname</span>:<span style="color:#bbb"> </span>kube-01<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">volumes</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>task-pv-storage<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span><span style="color:green;font-weight:700">persistentVolumeClaim</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span><span style="color:green;font-weight:700">claimName</span>:<span style="color:#bbb"> </span>task-pv-claim<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">containers</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>task-pv-container<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span><span style="color:green;font-weight:700">image</span>:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span><span style="color:green;font-weight:700">ports</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span>- <span style="color:green;font-weight:700">containerPort</span>:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">          </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span><span style="color:#b44">"http-server"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span><span style="color:green;font-weight:700">volumeMounts</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span>- <span style="color:green;font-weight:700">mountPath</span>:<span style="color:#bbb"> </span><span style="color:#b44">"/usr/share/nginx/html"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">          </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>task-pv-storage<span style="color:#bbb">
</span></span></span></code></pre></div></div></div><h2 id="allowed-topologies">Allowed topologies</h2><p>When a cluster operator specifies the <code>WaitForFirstConsumer</code> volume binding mode, it is no longer necessary
to restrict provisioning to specific topologies in most situations. However,
if still required, <code>allowedTopologies</code> can be specified.</p><p>This example demonstrates how to restrict the topology of provisioned volumes to specific
zones and should be used as a replacement for the <code>zone</code> and <code>zones</code> parameters for the
supported plugins.</p><div class="highlight code-sample"><div class="copy-code-icon"><a href="https://raw.githubusercontent.com/kubernetes/website/main/content/en/examples/storage/storageclass/storageclass-topology.yaml" download="storage/storageclass/storageclass-topology.yaml"><code>storage/storageclass/storageclass-topology.yaml</code>
</a><img src="/images/copycode.svg" class="icon-copycode" onclick="copyCode(&quot;storage-storageclass-storageclass-topology-yaml&quot;)" title="Copy storage/storageclass/storageclass-topology.yaml to clipboard"/></div><div class="includecode" id="storage-storageclass-storageclass-topology-yaml"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>StorageClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>standard<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">provisioner</span>:<span style="color:#bbb">  </span>example.com/example<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">type</span>:<span style="color:#bbb"> </span>pd-standard<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">volumeBindingMode</span>:<span style="color:#bbb"> </span>WaitForFirstConsumer<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">allowedTopologies</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/>- <span style="color:green;font-weight:700">matchLabelExpressions</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span>- <span style="color:green;font-weight:700">key</span>:<span style="color:#bbb"> </span>topology.kubernetes.io/zone<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:green;font-weight:700">values</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>- us-central-1a<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>- us-central-1b<span style="color:#bbb">
</span></span></span></code></pre></div></div></div><h2 id="parameters">Parameters</h2><p>StorageClasses have parameters that describe volumes belonging to the storage
class. Different parameters may be accepted depending on the <code>provisioner</code>.
When a parameter is omitted, some default is used.</p><p>There can be at most 512 parameters defined for a StorageClass.
The total length of the parameters object including its keys and values cannot
exceed 256 KiB.</p><h3 id="aws-ebs">AWS EBS</h3><p>Kubernetes 1.34 does not include a <code>awsElasticBlockStore</code> volume type.</p><p>The AWSElasticBlockStore in-tree storage driver was deprecated in the Kubernetes v1.19 release
and then removed entirely in the v1.27 release.</p><p>The Kubernetes project suggests that you use the <a href="https://github.com/kubernetes-sigs/aws-ebs-csi-driver">AWS EBS</a>
out-of-tree storage driver instead.</p><p>Here is an example StorageClass for the AWS EBS CSI driver:</p><div class="highlight code-sample"><div class="copy-code-icon"><a href="https://raw.githubusercontent.com/kubernetes/website/main/content/en/examples/storage/storageclass/storageclass-aws-ebs.yaml" download="storage/storageclass/storageclass-aws-ebs.yaml"><code>storage/storageclass/storageclass-aws-ebs.yaml</code>
</a><img src="/images/copycode.svg" class="icon-copycode" onclick="copyCode(&quot;storage-storageclass-storageclass-aws-ebs-yaml&quot;)" title="Copy storage/storageclass/storageclass-aws-ebs.yaml to clipboard"/></div><div class="includecode" id="storage-storageclass-storageclass-aws-ebs-yaml"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>StorageClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>ebs-sc<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">provisioner</span>:<span style="color:#bbb"> </span>ebs.csi.aws.com<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">volumeBindingMode</span>:<span style="color:#bbb"> </span>WaitForFirstConsumer<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">csi.storage.k8s.io/fstype</span>:<span style="color:#bbb"> </span>xfs<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">type</span>:<span style="color:#bbb"> </span>io1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">iopsPerGB</span>:<span style="color:#bbb"> </span><span style="color:#b44">"50"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">encrypted</span>:<span style="color:#bbb"> </span><span style="color:#b44">"true"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">tagSpecification_1</span>:<span style="color:#bbb"> </span><span style="color:#b44">"key1=value1"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">tagSpecification_2</span>:<span style="color:#bbb"> </span><span style="color:#b44">"key2=value2"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">allowedTopologies</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/>- <span style="color:green;font-weight:700">matchLabelExpressions</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span>- <span style="color:green;font-weight:700">key</span>:<span style="color:#bbb"> </span>topology.ebs.csi.aws.com/zone<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:green;font-weight:700">values</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>- us-east-2c<span style="color:#bbb">
</span></span></span></code></pre></div></div></div><p><code>tagSpecification</code>: Tags with this prefix are applied to dynamically provisioned EBS volumes.</p><h3 id="aws-efs">AWS EFS</h3><p>To configure AWS EFS storage, you can use the out-of-tree <a href="https://github.com/kubernetes-sigs/aws-efs-csi-driver">AWS_EFS_CSI_DRIVER</a>.</p><div class="highlight code-sample"><div class="copy-code-icon"><a href="https://raw.githubusercontent.com/kubernetes/website/main/content/en/examples/storage/storageclass/storageclass-aws-efs.yaml" download="storage/storageclass/storageclass-aws-efs.yaml"><code>storage/storageclass/storageclass-aws-efs.yaml</code>
</a><img src="/images/copycode.svg" class="icon-copycode" onclick="copyCode(&quot;storage-storageclass-storageclass-aws-efs-yaml&quot;)" title="Copy storage/storageclass/storageclass-aws-efs.yaml to clipboard"/></div><div class="includecode" id="storage-storageclass-storageclass-aws-efs-yaml"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>StorageClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>efs-sc<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">provisioner</span>:<span style="color:#bbb"> </span>efs.csi.aws.com<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">provisioningMode</span>:<span style="color:#bbb"> </span>efs-ap<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">fileSystemId</span>:<span style="color:#bbb"> </span>fs-92107410<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">directoryPerms</span>:<span style="color:#bbb"> </span><span style="color:#b44">"700"</span><span style="color:#bbb">
</span></span></span></code></pre></div></div></div><ul><li><code>provisioningMode</code>: The type of volume to be provisioned by Amazon EFS. Currently, only access point based provisioning is supported (<code>efs-ap</code>).</li><li><code>fileSystemId</code>: The file system under which the access point is created.</li><li><code>directoryPerms</code>: The directory permissions of the root directory created by the access point.</li></ul><p>For more details, refer to the <a href="https://github.com/kubernetes-sigs/aws-efs-csi-driver/blob/master/examples/kubernetes/dynamic_provisioning/README.md">AWS_EFS_CSI_Driver Dynamic Provisioning</a> documentation.</p><h3 id="nfs">NFS</h3><p>To configure NFS storage, you can use the in-tree driver or the
<a href="https://github.com/kubernetes-csi/csi-driver-nfs#readme">NFS CSI driver for Kubernetes</a>
(recommended).</p><div class="highlight code-sample"><div class="copy-code-icon"><a href="https://raw.githubusercontent.com/kubernetes/website/main/content/en/examples/storage/storageclass/storageclass-nfs.yaml" download="storage/storageclass/storageclass-nfs.yaml"><code>storage/storageclass/storageclass-nfs.yaml</code>
</a><img src="/images/copycode.svg" class="icon-copycode" onclick="copyCode(&quot;storage-storageclass-storageclass-nfs-yaml&quot;)" title="Copy storage/storageclass/storageclass-nfs.yaml to clipboard"/></div><div class="includecode" id="storage-storageclass-storageclass-nfs-yaml"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>StorageClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>example-nfs<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">provisioner</span>:<span style="color:#bbb"> </span>example.com/external-nfs<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">server</span>:<span style="color:#bbb"> </span>nfs-server.example.com<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">path</span>:<span style="color:#bbb"> </span>/share<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">readOnly</span>:<span style="color:#bbb"> </span><span style="color:#b44">"false"</span><span style="color:#bbb">
</span></span></span></code></pre></div></div></div><ul><li><code>server</code>: Server is the hostname or IP address of the NFS server.</li><li><code>path</code>: Path that is exported by the NFS server.</li><li><code>readOnly</code>: A flag indicating whether the storage will be mounted as read only (default false).</li></ul><p>Kubernetes doesn't include an internal NFS provisioner.
You need to use an external provisioner to create a StorageClass for NFS.
Here are some examples:</p><ul><li><a href="https://github.com/kubernetes-sigs/nfs-ganesha-server-and-external-provisioner">NFS Ganesha server and external provisioner</a></li><li><a href="https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner">NFS subdir external provisioner</a></li></ul><h3 id="vsphere">vSphere</h3><p>There are two types of provisioners for vSphere storage classes:</p><ul><li><a href="#vsphere-provisioner-csi">CSI provisioner</a>: <code>csi.vsphere.vmware.com</code></li><li><a href="#vcp-provisioner">vCP provisioner</a>: <code>kubernetes.io/vsphere-volume</code></li></ul><p>In-tree provisioners are <a href="/blog/2019/12/09/kubernetes-1-17-feature-csi-migration-beta/#why-are-we-migrating-in-tree-plugins-to-csi">deprecated</a>.
For more information on the CSI provisioner, see
<a href="https://vsphere-csi-driver.sigs.k8s.io/">Kubernetes vSphere CSI Driver</a> and
<a href="/docs/concepts/storage/volumes/#vsphere-csi-migration">vSphereVolume CSI migration</a>.</p><h4 id="vsphere-provisioner-csi">CSI Provisioner</h4><p>The vSphere CSI StorageClass provisioner works with Tanzu Kubernetes clusters.
For an example, refer to the <a href="https://github.com/kubernetes-sigs/vsphere-csi-driver/blob/master/example/vanilla-k8s-RWM-filesystem-volumes/example-sc.yaml">vSphere CSI repository</a>.</p><h4 id="vcp-provisioner">vCP Provisioner</h4><p>The following examples use the VMware Cloud Provider (vCP) StorageClass provisioner.</p><ol><li><p>Create a StorageClass with a user specified disk format.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>StorageClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>fast<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">provisioner</span>:<span style="color:#bbb"> </span>kubernetes.io/vsphere-volume<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">diskformat</span>:<span style="color:#bbb"> </span>zeroedthick<span style="color:#bbb">
</span></span></span></code></pre></div><p><code>diskformat</code>: <code>thin</code>, <code>zeroedthick</code> and <code>eagerzeroedthick</code>. Default: <code>"thin"</code>.</p></li><li><p>Create a StorageClass with a disk format on a user specified datastore.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>StorageClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>fast<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">provisioner</span>:<span style="color:#bbb"> </span>kubernetes.io/vsphere-volume<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">diskformat</span>:<span style="color:#bbb"> </span>zeroedthick<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">datastore</span>:<span style="color:#bbb"> </span>VSANDatastore<span style="color:#bbb">
</span></span></span></code></pre></div><p><code>datastore</code>: The user can also specify the datastore in the StorageClass.
The volume will be created on the datastore specified in the StorageClass,
which in this case is <code>VSANDatastore</code>. This field is optional. If the
datastore is not specified, then the volume will be created on the datastore
specified in the vSphere config file used to initialize the vSphere Cloud
Provider.</p></li><li><p>Storage Policy Management inside kubernetes</p><ul><li><p>Using existing vCenter SPBM policy</p><p>One of the most important features of vSphere for Storage Management is
policy based Management. Storage Policy Based Management (SPBM) is a
storage policy framework that provides a single unified control plane
across a broad range of data services and storage solutions. SPBM enables
vSphere administrators to overcome upfront storage provisioning challenges,
such as capacity planning, differentiated service levels and managing
capacity headroom.</p><p>The SPBM policies can be specified in the StorageClass using the
<code>storagePolicyName</code> parameter.</p></li><li><p>Virtual SAN policy support inside Kubernetes</p><p>Vsphere Infrastructure (VI) Admins will have the ability to specify custom
Virtual SAN Storage Capabilities during dynamic volume provisioning. You
can now define storage requirements, such as performance and availability,
in the form of storage capabilities during dynamic volume provisioning.
The storage capability requirements are converted into a Virtual SAN
policy which are then pushed down to the Virtual SAN layer when a
persistent volume (virtual disk) is being created. The virtual disk is
distributed across the Virtual SAN datastore to meet the requirements.</p><p>You can see <a href="https://github.com/vmware-archive/vsphere-storage-for-kubernetes/blob/fa4c8b8ad46a85b6555d715dd9d27ff69839df53/documentation/policy-based-mgmt.md">Storage Policy Based Management for dynamic provisioning of volumes</a>
for more details on how to use storage policies for persistent volumes
management.</p></li></ul></li></ol><h3 id="ceph-rbd">Ceph RBD (deprecated)</h3><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4><div class="feature-state-notice feature-deprecated"><span class="feature-state-name">FEATURE STATE:</span>
<code>Kubernetes v1.28 [deprecated]</code></div><p>This internal provisioner of Ceph RBD is deprecated. Please use
<a href="https://github.com/ceph/ceph-csi">CephFS RBD CSI driver</a>.</p></div><div class="highlight code-sample"><div class="copy-code-icon"><a href="https://raw.githubusercontent.com/kubernetes/website/main/content/en/examples/storage/storageclass/storageclass-ceph-rbd.yaml" download="storage/storageclass/storageclass-ceph-rbd.yaml"><code>storage/storageclass/storageclass-ceph-rbd.yaml</code>
</a><img src="/images/copycode.svg" class="icon-copycode" onclick="copyCode(&quot;storage-storageclass-storageclass-ceph-rbd-yaml&quot;)" title="Copy storage/storageclass/storageclass-ceph-rbd.yaml to clipboard"/></div><div class="includecode" id="storage-storageclass-storageclass-ceph-rbd-yaml"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>StorageClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>fast<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">provisioner</span>:<span style="color:#bbb"> </span>kubernetes.io/rbd<span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># This provisioner is deprecated</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">monitors</span>:<span style="color:#bbb"> </span><span style="color:#666">198.19.254.105</span>:<span style="color:#666">6789</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">adminId</span>:<span style="color:#bbb"> </span>kube<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">adminSecretName</span>:<span style="color:#bbb"> </span>ceph-secret<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">adminSecretNamespace</span>:<span style="color:#bbb"> </span>kube-system<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">pool</span>:<span style="color:#bbb"> </span>kube<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">userId</span>:<span style="color:#bbb"> </span>kube<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">userSecretName</span>:<span style="color:#bbb"> </span>ceph-secret-user<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">userSecretNamespace</span>:<span style="color:#bbb"> </span>default<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">fsType</span>:<span style="color:#bbb"> </span>ext4<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">imageFormat</span>:<span style="color:#bbb"> </span><span style="color:#b44">"2"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">imageFeatures</span>:<span style="color:#bbb"> </span><span style="color:#b44">"layering"</span><span style="color:#bbb">
</span></span></span></code></pre></div></div></div><ul><li><p><code>monitors</code>: Ceph monitors, comma delimited. This parameter is required.</p></li><li><p><code>adminId</code>: Ceph client ID that is capable of creating images in the pool.
Default is "admin".</p></li><li><p><code>adminSecretName</code>: Secret Name for <code>adminId</code>. This parameter is required.
The provided secret must have type "kubernetes.io/rbd".</p></li><li><p><code>adminSecretNamespace</code>: The namespace for <code>adminSecretName</code>. Default is "default".</p></li><li><p><code>pool</code>: Ceph RBD pool. Default is "rbd".</p></li><li><p><code>userId</code>: Ceph client ID that is used to map the RBD image. Default is the
same as <code>adminId</code>.</p></li><li><p><code>userSecretName</code>: The name of Ceph Secret for <code>userId</code> to map RBD image. It
must exist in the same namespace as PVCs. This parameter is required.
The provided secret must have type "kubernetes.io/rbd", for example created in this
way:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>kubectl create secret generic ceph-secret --type<span style="color:#666">=</span><span style="color:#b44">"kubernetes.io/rbd"</span> <span style="color:#b62;font-weight:700">\
</span></span></span><span style="display:flex"><span><span style="color:#b62;font-weight:700"/>  --from-literal<span style="color:#666">=</span><span style="color:#b8860b">key</span><span style="color:#666">=</span><span style="color:#b44">'QVFEQ1pMdFhPUnQrSmhBQUFYaERWNHJsZ3BsMmNjcDR6RFZST0E9PQ=='</span> <span style="color:#b62;font-weight:700">\
</span></span></span><span style="display:flex"><span><span style="color:#b62;font-weight:700"/>  --namespace<span style="color:#666">=</span>kube-system
</span></span></code></pre></div></li><li><p><code>userSecretNamespace</code>: The namespace for <code>userSecretName</code>.</p></li><li><p><code>fsType</code>: fsType that is supported by kubernetes. Default: <code>"ext4"</code>.</p></li><li><p><code>imageFormat</code>: Ceph RBD image format, "1" or "2". Default is "2".</p></li><li><p><code>imageFeatures</code>: This parameter is optional and should only be used if you
set <code>imageFormat</code> to "2". Currently supported features are <code>layering</code> only.
Default is "", and no features are turned on.</p></li></ul><h3 id="azure-disk">Azure Disk</h3><p>Kubernetes 1.34 does not include a <code>azureDisk</code> volume type.</p><p>The <code>azureDisk</code> in-tree storage driver was deprecated in the Kubernetes v1.19 release
and then removed entirely in the v1.27 release.</p><p>The Kubernetes project suggests that you use the <a href="https://github.com/kubernetes-sigs/azuredisk-csi-driver">Azure Disk</a> third party
storage driver instead.</p><h3 id="azure-file">Azure File (deprecated)</h3><div class="highlight code-sample"><div class="copy-code-icon"><a href="https://raw.githubusercontent.com/kubernetes/website/main/content/en/examples/storage/storageclass/storageclass-azure-file.yaml" download="storage/storageclass/storageclass-azure-file.yaml"><code>storage/storageclass/storageclass-azure-file.yaml</code>
</a><img src="/images/copycode.svg" class="icon-copycode" onclick="copyCode(&quot;storage-storageclass-storageclass-azure-file-yaml&quot;)" title="Copy storage/storageclass/storageclass-azure-file.yaml to clipboard"/></div><div class="includecode" id="storage-storageclass-storageclass-azure-file-yaml"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>StorageClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>azurefile<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">provisioner</span>:<span style="color:#bbb"> </span>kubernetes.io/azure-file<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">skuName</span>:<span style="color:#bbb"> </span>Standard_LRS<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">location</span>:<span style="color:#bbb"> </span>eastus<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">storageAccount</span>:<span style="color:#bbb"> </span>azure_storage_account_name<span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># example value</span><span style="color:#bbb">
</span></span></span></code></pre></div></div></div><ul><li><code>skuName</code>: Azure storage account SKU tier. Default is empty.</li><li><code>location</code>: Azure storage account location. Default is empty.</li><li><code>storageAccount</code>: Azure storage account name. Default is empty. If a storage
account is not provided, all storage accounts associated with the resource
group are searched to find one that matches <code>skuName</code> and <code>location</code>. If a
storage account is provided, it must reside in the same resource group as the
cluster, and <code>skuName</code> and <code>location</code> are ignored.</li><li><code>secretNamespace</code>: the namespace of the secret that contains the Azure Storage
Account Name and Key. Default is the same as the Pod.</li><li><code>secretName</code>: the name of the secret that contains the Azure Storage Account Name and
Key. Default is <code>azure-storage-account-&lt;accountName&gt;-secret</code></li><li><code>readOnly</code>: a flag indicating whether the storage will be mounted as read only.
Defaults to false which means a read/write mount. This setting will impact the
<code>ReadOnly</code> setting in VolumeMounts as well.</li></ul><p>During storage provisioning, a secret named by <code>secretName</code> is created for the
mounting credentials. If the cluster has enabled both
<a href="/docs/reference/access-authn-authz/rbac/">RBAC</a> and
<a href="/docs/reference/access-authn-authz/rbac/#controller-roles">Controller Roles</a>,
add the <code>create</code> permission of resource <code>secret</code> for clusterrole
<code>system:controller:persistent-volume-binder</code>.</p><p>In a multi-tenancy context, it is strongly recommended to set the value for
<code>secretNamespace</code> explicitly, otherwise the storage account credentials may
be read by other users.</p><h3 id="portworx-volume">Portworx volume (deprecated)</h3><div class="highlight code-sample"><div class="copy-code-icon"><a href="https://raw.githubusercontent.com/kubernetes/website/main/content/en/examples/storage/storageclass/storageclass-portworx-volume.yaml" download="storage/storageclass/storageclass-portworx-volume.yaml"><code>storage/storageclass/storageclass-portworx-volume.yaml</code>
</a><img src="/images/copycode.svg" class="icon-copycode" onclick="copyCode(&quot;storage-storageclass-storageclass-portworx-volume-yaml&quot;)" title="Copy storage/storageclass/storageclass-portworx-volume.yaml to clipboard"/></div><div class="includecode" id="storage-storageclass-storageclass-portworx-volume-yaml"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>StorageClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>portworx-io-priority-high<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">provisioner</span>:<span style="color:#bbb"> </span>kubernetes.io/portworx-volume<span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># This provisioner is deprecated</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">repl</span>:<span style="color:#bbb"> </span><span style="color:#b44">"1"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">snap_interval</span>:<span style="color:#bbb"> </span><span style="color:#b44">"70"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">priority_io</span>:<span style="color:#bbb"> </span><span style="color:#b44">"high"</span><span style="color:#bbb">
</span></span></span></code></pre></div></div></div><ul><li><code>fs</code>: filesystem to be laid out: <code>none/xfs/ext4</code> (default: <code>ext4</code>).</li><li><code>block_size</code>: block size in Kbytes (default: <code>32</code>).</li><li><code>repl</code>: number of synchronous replicas to be provided in the form of
replication factor <code>1..3</code> (default: <code>1</code>) A string is expected here i.e.
<code>"1"</code> and not <code>1</code>.</li><li><code>priority_io</code>: determines whether the volume will be created from higher
performance or a lower priority storage <code>high/medium/low</code> (default: <code>low</code>).</li><li><code>snap_interval</code>: clock/time interval in minutes for when to trigger snapshots.
Snapshots are incremental based on difference with the prior snapshot, 0
disables snaps (default: <code>0</code>). A string is expected here i.e.
<code>"70"</code> and not <code>70</code>.</li><li><code>aggregation_level</code>: specifies the number of chunks the volume would be
distributed into, 0 indicates a non-aggregated volume (default: <code>0</code>). A string
is expected here i.e. <code>"0"</code> and not <code>0</code></li><li><code>ephemeral</code>: specifies whether the volume should be cleaned-up after unmount
or should be persistent. <code>emptyDir</code> use case can set this value to true and
<code>persistent volumes</code> use case such as for databases like Cassandra should set
to false, <code>true/false</code> (default <code>false</code>). A string is expected here i.e.
<code>"true"</code> and not <code>true</code>.</li></ul><h3 id="local">Local</h3><div class="highlight code-sample"><div class="copy-code-icon"><a href="https://raw.githubusercontent.com/kubernetes/website/main/content/en/examples/storage/storageclass/storageclass-local.yaml" download="storage/storageclass/storageclass-local.yaml"><code>storage/storageclass/storageclass-local.yaml</code>
</a><img src="/images/copycode.svg" class="icon-copycode" onclick="copyCode(&quot;storage-storageclass-storageclass-local-yaml&quot;)" title="Copy storage/storageclass/storageclass-local.yaml to clipboard"/></div><div class="includecode" id="storage-storageclass-storageclass-local-yaml"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>storage.k8s.io/v1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>StorageClass<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>local-storage<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">provisioner</span>:<span style="color:#bbb"> </span>kubernetes.io/no-provisioner<span style="color:#bbb"> </span><span style="color:#080;font-style:italic"># indicates that this StorageClass does not support automatic provisioning</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">volumeBindingMode</span>:<span style="color:#bbb"> </span>WaitForFirstConsumer<span style="color:#bbb">
</span></span></span></code></pre></div></div></div><p>Local volumes do not support dynamic provisioning in Kubernetes 1.34;
however a StorageClass should still be created to delay volume binding until a Pod is actually
scheduled to the appropriate node. This is specified by the <code>WaitForFirstConsumer</code> volume
binding mode.</p><p>Delaying volume binding allows the scheduler to consider all of a Pod's
scheduling constraints when choosing an appropriate PersistentVolume for a
PersistentVolumeClaim.</p></div>