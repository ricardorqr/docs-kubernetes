<div class="td-content"><h1 data-pagefind-weight="10">Kubectl user preferences (kuberc)</h1><div class="feature-state-notice feature-beta"><span class="feature-state-name">FEATURE STATE:</span>
<code>Kubernetes 1.34 [beta]</code></div><p>A Kubernetes <code>kuberc</code> configuration file allows you to define preferences for
<a class="glossary-tooltip" title="A command line tool for communicating with a Kubernetes cluster." data-toggle="tooltip" data-placement="top" href="/docs/reference/kubectl/" target="_blank" aria-label="kubectl">kubectl</a>,
such as default options and command aliases. Unlike the kubeconfig file, a <code>kuberc</code>
configuration file does <strong>not</strong> contain cluster details, usernames or passwords.</p><p>The default location of this configuration file is <code>$HOME/.kube/kuberc</code>.
To provide kubectl with a path to a custom kuberc file, use the <code>--kuberc</code> command line option,
or set the <code>KUBERC</code> environment variable.</p><p>A <code>kuberc</code> using the <code>kubectl.config.k8s.io/v1beta1</code> format allows you to define
two types of user preferences:</p><ol><li><a href="#aliases">Aliases</a> - allow you to create shorter versions of your favorite
commands, optionally setting options and arguments.</li><li><a href="#defaults">Defaults</a> - allow you to configure default option values for your
favorite commands.</li></ol><h2 id="aliases">aliases</h2><p>Within a <code>kuberc</code> configuration, the <em>aliases</em> section allows you to define custom
shortcuts for kubectl commands, optionally with preset command line arguments
and flags.</p><p>This next example defines a <code>kubectl getn</code> alias for the <code>kubectl get</code> subcommand,
additionally specifying JSON output format: <code>--output=json</code>.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>kubectl.config.k8s.io/v1beta1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>Preference<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">aliases</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>getn<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">command</span>:<span style="color:#bbb"> </span>get<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">options</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">   </span>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>output<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">     </span><span style="color:green;font-weight:700">default</span>:<span style="color:#bbb"> </span>json<span style="color:#bbb">
</span></span></span></code></pre></div><p>In this example, the following settings were used:</p><ol><li><code>name</code> - Alias name must not collide with the built-in commands.</li><li><code>command</code> - Specify the underlying built-in command that your alias will execute.
This includes support for subcommands like <code>create role</code>.</li><li><code>options</code> - Specify default values for options. If you explicitly specify an option
when you run <code>kubectl</code>, the value you provide takes precedence over the default
one defined in <code>kuberc</code>.</li></ol><p>With this alias, running <code>kubectl getn pods</code> will default JSON output. However,
if you execute <code>kubectl getn pods -oyaml</code>, the output will be in YAML format.</p><p>Full <code>kuberc</code> schema is available <a href="/docs/reference/config-api/kuberc.v1beta1/">here</a>.</p><h3 id="prependargs">prependArgs</h3><p>This next example, will expand the previous one, introducing <code>prependArgs</code> section,
which allows inserting arbitrary arguments immediately after the kubectl command
and its subcommand (if any).</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>kubectl.config.k8s.io/v1beta1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>Preference<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">aliases</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>getn<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:green;font-weight:700">command</span>:<span style="color:#bbb"> </span>get<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:green;font-weight:700">options</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>output<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span><span style="color:green;font-weight:700">default</span>:<span style="color:#bbb"> </span>json<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:green;font-weight:700">prependArgs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span>- namespace<span style="color:#bbb">
</span></span></span></code></pre></div><p>In this example, the following settings were used:</p><ol><li><code>name</code> - Alias name must not collide with the built-in commands.</li><li><code>command</code> - Specify the underlying built-in command that your alias will execute.
This includes support for subcommands like <code>create role</code>.</li><li><code>options</code> - Specify default values for options. If you explicitly specify an option
when you run <code>kubectl</code>, the value you provide takes precedence over the default
one defined in <code>kuberc</code>.</li><li><code>prependArgs</code> - Specify explicit argument that will be placed right after the
command. Here, this will be translated to <code>kubectl get namespace test-ns --output json</code>.</li></ol><h3 id="appendargs">appendArgs</h3><p>This next example, will introduce a mechanism similar to prepending arguments,
this time, though, we will append arguments to the end of the kubectl command.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>kubectl.config.k8s.io/v1beta1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>Preference<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">aliases</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>runx<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">command</span>:<span style="color:#bbb"> </span>run<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">options</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>image<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span><span style="color:green;font-weight:700">default</span>:<span style="color:#bbb"> </span>busybox<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>namespace<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span><span style="color:green;font-weight:700">default</span>:<span style="color:#bbb"> </span>test-ns<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">appendArgs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>- --<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>- custom-arg<span style="color:#bbb">
</span></span></span></code></pre></div><p>In this example, the following settings were used:</p><ol><li><code>name</code> - Alias name must not collide with the built-in commands.</li><li><code>command</code> - Specify the underlying built-in command that your alias will execute.
This includes support for subcommands like <code>create role</code>.</li><li><code>options</code> - Specify default values for options. If you explicitly specify an option
when you run <code>kubectl</code>, the value you provide takes precedence over the default
one defined in <code>kuberc</code>.</li><li><code>appendArgs</code> - Specify explicit arguments that will be placed at the end of the
command. Here, this will be translated to <code>kubectl run test-pod --namespace test-ns --image busybox -- custom-arg</code>.</li></ol><h2 id="defaults">defaults</h2><p>Within a <code>kuberc</code> configuration, <code>defaults</code> section lets you specify default values
for command line arguments.</p><p>This next example makes the interactive removal the default mode for invoking
<code>kubectl delete</code>:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>kubectl.config.k8s.io/v1beta1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>Preference<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">defaults</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/>- <span style="color:green;font-weight:700">command</span>:<span style="color:#bbb"> </span>delete<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:green;font-weight:700">options</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>interactive<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span><span style="color:green;font-weight:700">default</span>:<span style="color:#bbb"> </span><span style="color:#b44">"true"</span><span style="color:#bbb">
</span></span></span></code></pre></div><p>In this example, the following settings were used:</p><ol><li><code>command</code> - Built-in command, this includes support for subcommands like <code>create role</code>.</li><li><code>options</code> - Specify default values for options. If you explicitly specify an option
when you run <code>kubectl</code>, the value you provide takes precedence over the default
one defined in <code>kuberc</code>.</li></ol><p>With this setting, running <code>kubectl delete pod/test-pod</code> will default to prompting for confirmation.
However, <code>kubectl delete pod/test-pod --interactive=false</code> will bypass the confirmation.</p><h2 id="suggested-defaults">Suggested defaults</h2><p>The kubectl maintainers encourage you to adopt kuberc with the following defaults:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="display:flex"><span><span style="color:green;font-weight:700">apiVersion</span>:<span style="color:#bbb"> </span>kubectl.config.k8s.io/v1beta1<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">kind</span>:<span style="color:#bbb"> </span>Preference<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"/><span style="color:green;font-weight:700">defaults</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:#080;font-style:italic"># (1) default server-side apply</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span>- <span style="color:green;font-weight:700">command</span>:<span style="color:#bbb"> </span>apply<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:green;font-weight:700">options</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>server-side<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span><span style="color:green;font-weight:700">default</span>:<span style="color:#bbb"> </span><span style="color:#b44">"true"</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span><span style="color:#080;font-style:italic"># (2) default interactive deletion</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">  </span>- <span style="color:green;font-weight:700">command</span>:<span style="color:#bbb"> </span>delete<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:green;font-weight:700">options</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span>- <span style="color:green;font-weight:700">name</span>:<span style="color:#bbb"> </span>interactive<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span><span style="color:green;font-weight:700">default</span>:<span style="color:#bbb"> </span><span style="color:#b44">"true"</span><span style="color:#bbb">
</span></span></span></code></pre></div><p>In this example, the following settings are enforced:</p><ol><li>Defaults to using <a href="/docs/reference/using-api/server-side-apply/">Server-Side Apply</a>.</li><li>Defaults to interactive removal whenever invoking <code>kubectl delete</code> to prevent
accidental removal of resources from the cluster.</li></ol><h2 id="disable-kuberc">Disable kuberc</h2><p>To temporarily disable the <code>kuberc</code> functionality, set (and export) the environment
variable <code>KUBERC</code> with the value <code>off</code>:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#a2f">export</span> <span style="color:#b8860b">KUBERC</span><span style="color:#666">=</span>off
</span></span></code></pre></div><p>or disable the feature gate:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#a2f">export</span> <span style="color:#b8860b">KUBECTL_KUBERC</span><span style="color:#666">=</span><span style="color:#a2f">false</span>
</span></span></code></pre></div></div>