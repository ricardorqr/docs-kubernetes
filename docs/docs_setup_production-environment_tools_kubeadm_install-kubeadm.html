<div class="td-content"><h1 data-pagefind-weight="10">Installing kubeadm</h1><p><img src="/images/kubeadm-stacked-color.png" align="right" width="150px"/>
This page shows how to install the <code>kubeadm</code> toolbox.
For information on how to create a cluster with kubeadm once you have performed this installation process,
see the <a href="/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/">Creating a cluster with kubeadm</a> page.</p><div class="version-list"><p>This installation guide is for Kubernetes v1.34. If you want to use a different Kubernetes version, please refer to the following pages instead:</p><ul><li><a href="https://v1-33.docs.kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">Installing kubeadm (Kubernetes v1.33)</a></li><li><a href="https://v1-32.docs.kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">Installing kubeadm (Kubernetes v1.32)</a></li><li><a href="https://v1-31.docs.kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">Installing kubeadm (Kubernetes v1.31)</a></li><li><a href="https://v1-30.docs.kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">Installing kubeadm (Kubernetes v1.30)</a></li></ul></div><h2 id="before-you-begin">Before you begin</h2><ul><li>A compatible Linux host. The Kubernetes project provides generic instructions for Linux distributions
based on Debian and Red Hat, and those distributions without a package manager.</li><li>2 GB or more of RAM per machine (any less will leave little room for your apps).</li><li>2 CPUs or more for control plane machines.</li><li>Full network connectivity between all machines in the cluster (public or private network is fine).</li><li>Unique hostname, MAC address, and product_uuid for every node. See <a href="#verify-mac-address">here</a> for more details.</li><li>Certain ports are open on your machines. See <a href="#check-required-ports">here</a> for more details.</li></ul><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>The <code>kubeadm</code> installation is done via binaries that use dynamic linking and assumes that your target system provides <code>glibc</code>.
This is a reasonable assumption on many Linux distributions (including Debian, Ubuntu, Fedora, CentOS, etc.)
but it is not always the case with custom and lightweight distributions which don't include <code>glibc</code> by default, such as Alpine Linux.
The expectation is that the distribution either includes <code>glibc</code> or a
<a href="https://wiki.alpinelinux.org/wiki/Running_glibc_programs">compatibility layer</a>
that provides the expected symbols.</div><h2 id="check-your-os-version">Check your OS version</h2><div class="alert alert-secondary callout third-party-content" role="alert"><strong>Note:</strong>â€ˆThis section links to third party projects that provide functionality required by Kubernetes. The Kubernetes project authors aren't responsible for these projects, which are listed alphabetically. To add a project to this list, read the <a href="/docs/contribute/style/content-guide/#third-party-content">content guide</a> before submitting a change. <a href="#third-party-content-disclaimer">More information.</a></div><ul class="nav nav-tabs" id="operating-system-version-check" role="tablist"><li class="nav-item"><a data-toggle="tab" class="nav-link active" href="#operating-system-version-check-0" role="tab" aria-controls="operating-system-version-check-0" aria-selected="true">Linux</a></li><li class="nav-item"><a data-toggle="tab" class="nav-link" href="#operating-system-version-check-1" role="tab" aria-controls="operating-system-version-check-1">Windows</a></li></ul><div class="tab-content" id="operating-system-version-check"><div id="operating-system-version-check-0" class="tab-pane show active" role="tabpanel" aria-labelledby="operating-system-version-check-0"><p><ul><li>The kubeadm project supports LTS kernels. See <a href="https://www.kernel.org/category/releases.html">List of LTS kernels</a>.</li><li>You can get the kernel version using the command <code>uname -r</code></li></ul><p>For more information, see <a href="/docs/reference/node/kernel-version-requirements/">Linux Kernel Requirements</a>.</p></p></div><div id="operating-system-version-check-1" class="tab-pane" role="tabpanel" aria-labelledby="operating-system-version-check-1"><p><ul><li>The kubeadm project supports recent kernel versions. For a list of recent kernels, see <a href="https://learn.microsoft.com/en-us/windows/release-health/windows-server-release-info">Windows Server Release Information</a>.</li><li>You can get the kernel version (also called the OS version) using the command <code>systeminfo</code></li></ul><p>For more information, see <a href="/docs/concepts/windows/intro/#windows-os-version-support">Windows OS version compatibility</a>.</p></p></div></div><p>A Kubernetes cluster created by kubeadm depends on software that use kernel features.
This software includes, but is not limited to the
<a class="glossary-tooltip" title="The container runtime is the software that is responsible for running containers." data-toggle="tooltip" data-placement="top" href="/docs/setup/production-environment/container-runtimes" target="_blank" aria-label="container runtime">container runtime</a>,
the <a class="glossary-tooltip" title="An agent that runs on each node in the cluster. It makes sure that containers are running in a pod." data-toggle="tooltip" data-placement="top" href="/docs/reference/command-line-tools-reference/kubelet" target="_blank" aria-label="kubelet">kubelet</a>, and a <a class="glossary-tooltip" title="Container network interface (CNI) plugins are a type of Network plugin that adheres to the appc/CNI specification." data-toggle="tooltip" data-placement="top" href="/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/" target="_blank" aria-label="Container Network Interface">Container Network Interface</a> plugin.</p><p>To help you avoid unexpected errors as a result of an unsupported kernel version, kubeadm runs the <code>SystemVerification</code>
pre-flight check. This check fails if the kernel version is not supported.</p><p>You may choose to skip the check, if you know that your kernel
provides the required features, even though kubeadm does not support its version.</p><h2 id="verify-mac-address">Verify the MAC address and product_uuid are unique for every node</h2><ul><li>You can get the MAC address of the network interfaces using the command <code>ip link</code> or <code>ifconfig -a</code></li><li>The product_uuid can be checked by using the command <code>sudo cat /sys/class/dmi/id/product_uuid</code></li></ul><p>It is very likely that hardware devices will have unique addresses, although some virtual machines may have
identical values. Kubernetes uses these values to uniquely identify the nodes in the cluster.
If these values are not unique to each node, the installation process
may <a href="https://github.com/kubernetes/kubeadm/issues/31">fail</a>.</p><h2 id="check-network-adapters">Check network adapters</h2><p>If you have more than one network adapter, and your Kubernetes components are not reachable on the default
route, we recommend you add IP route(s) so Kubernetes cluster addresses go via the appropriate adapter.</p><h2 id="check-required-ports">Check required ports</h2><p>These <a href="/docs/reference/networking/ports-and-protocols/">required ports</a>
need to be open in order for Kubernetes components to communicate with each other.
You can use tools like <a href="https://netcat.sourceforge.net">netcat</a> to check if a port is open. For example:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>nc 127.0.0.1 <span style="color:#666">6443</span> -zv -w <span style="color:#666">2</span>
</span></span></code></pre></div><p>The pod network plugin you use may also require certain ports to be
open. Since this differs with each pod network plugin, please see the
documentation for the plugins about what port(s) those need.</p><h2 id="swap-configuration">Swap configuration</h2><p>The default behavior of a kubelet is to fail to start if swap memory is detected on a node.
This means that swap should either be disabled or tolerated by kubelet.</p><ul><li>To tolerate swap, add <code>failSwapOn: false</code> to kubelet configuration or as a command line argument.
Note: even if <code>failSwapOn: false</code> is provided, workloads wouldn't have swap access by default.
This can be changed by setting a <code>swapBehavior</code>, again in the kubelet configuration file. To use swap,
set a <code>swapBehavior</code> other than the default <code>NoSwap</code> setting.
See <a href="/docs/concepts/cluster-administration/swap-memory-management/">Swap memory management</a> for more details.</li><li>To disable swap, <code>sudo swapoff -a</code> can be used to disable swapping temporarily.
To make this change persistent across reboots, make sure swap is disabled in
config files like <code>/etc/fstab</code>, <code>systemd.swap</code>, depending how it was configured on your system.</li></ul><h2 id="installing-runtime">Installing a container runtime</h2><p>To run containers in Pods, Kubernetes uses a
<a class="glossary-tooltip" title="The container runtime is the software that is responsible for running containers." data-toggle="tooltip" data-placement="top" href="/docs/setup/production-environment/container-runtimes" target="_blank" aria-label="container runtime">container runtime</a>.</p><p>By default, Kubernetes uses the
<a class="glossary-tooltip" title="Protocol for communication between the kubelet and the local container runtime." data-toggle="tooltip" data-placement="top" href="/docs/concepts/architecture/cri" target="_blank" aria-label="Container Runtime Interface">Container Runtime Interface</a> (CRI)
to interface with your chosen container runtime.</p><p>If you don't specify a runtime, kubeadm automatically tries to detect an installed
container runtime by scanning through a list of known endpoints.</p><p>If multiple or no container runtimes are detected kubeadm will throw an error
and will request that you specify which one you want to use.</p><p>See <a href="/docs/setup/production-environment/container-runtimes/">container runtimes</a>
for more information.</p><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>Docker Engine does not implement the <a href="/docs/concepts/architecture/cri/">CRI</a>
which is a requirement for a container runtime to work with Kubernetes.
For that reason, an additional service <a href="https://mirantis.github.io/cri-dockerd/">cri-dockerd</a>
has to be installed. cri-dockerd is a project based on the legacy built-in
Docker Engine support that was <a href="/dockershim">removed</a> from the kubelet in version 1.24.</div><p>The tables below include the known endpoints for supported operating systems:</p><ul class="nav nav-tabs" id="container-runtime" role="tablist"><li class="nav-item"><a data-toggle="tab" class="nav-link active" href="#container-runtime-0" role="tab" aria-controls="container-runtime-0" aria-selected="true">Linux</a></li><li class="nav-item"><a data-toggle="tab" class="nav-link" href="#container-runtime-1" role="tab" aria-controls="container-runtime-1">Windows</a></li></ul><div class="tab-content" id="container-runtime"><div id="container-runtime-0" class="tab-pane show active" role="tabpanel" aria-labelledby="container-runtime-0"><p><table><caption style="display:none">Linux container runtimes</caption><thead><tr><th>Runtime</th><th>Path to Unix domain socket</th></tr></thead><tbody><tr><td>containerd</td><td><code>unix:///var/run/containerd/containerd.sock</code></td></tr><tr><td>CRI-O</td><td><code>unix:///var/run/crio/crio.sock</code></td></tr><tr><td>Docker Engine (using cri-dockerd)</td><td><code>unix:///var/run/cri-dockerd.sock</code></td></tr></tbody></table></p></div><div id="container-runtime-1" class="tab-pane" role="tabpanel" aria-labelledby="container-runtime-1"><p><table><caption style="display:none">Windows container runtimes</caption><thead><tr><th>Runtime</th><th>Path to Windows named pipe</th></tr></thead><tbody><tr><td>containerd</td><td><code>npipe:////./pipe/containerd-containerd</code></td></tr><tr><td>Docker Engine (using cri-dockerd)</td><td><code>npipe:////./pipe/cri-dockerd</code></td></tr></tbody></table></p></div></div><h2 id="installing-kubeadm-kubelet-and-kubectl">Installing kubeadm, kubelet and kubectl</h2><p>You will install these packages on all of your machines:</p><ul><li><p><code>kubeadm</code>: the command to bootstrap the cluster.</p></li><li><p><code>kubelet</code>: the component that runs on all of the machines in your cluster
and does things like starting pods and containers.</p></li><li><p><code>kubectl</code>: the command line util to talk to your cluster.</p></li></ul><p>kubeadm <strong>will not</strong> install or manage <code>kubelet</code> or <code>kubectl</code> for you, so you will
need to ensure they match the version of the Kubernetes control plane you want
kubeadm to install for you. If you do not, there is a risk of a version skew occurring that
can lead to unexpected, buggy behaviour. However, <em>one</em> minor version skew between the
kubelet and the control plane is supported, but the kubelet version may never exceed the API
server version. For example, the kubelet running 1.7.0 should be fully compatible with a 1.8.0 API server,
but not vice versa.</p><p>For information about installing <code>kubectl</code>, see <a href="/docs/tasks/tools/">Install and set up kubectl</a>.</p><div class="alert alert-danger" role="alert"><h4 class="alert-heading">Warning:</h4>These instructions exclude all Kubernetes packages from any system upgrades.
This is because kubeadm and Kubernetes require
<a href="/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/">special attention to upgrade</a>.</div><p>For more information on version skews, see:</p><ul><li>Kubernetes <a href="/docs/setup/release/version-skew-policy/">version and version-skew policy</a></li><li>Kubeadm-specific <a href="/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#version-skew-policy">version skew policy</a></li></ul><div class="alert alert-secondary callout note" role="alert"><strong>Note:</strong> The legacy package repositories (<code>apt.kubernetes.io</code> and <code>yum.kubernetes.io</code>) have been
<a href="/blog/2023/08/31/legacy-package-repository-deprecation/">deprecated and frozen starting from September 13, 2023</a>.
<strong>Using the <a href="/blog/2023/08/15/pkgs-k8s-io-introduction/">new package repositories hosted at <code>pkgs.k8s.io</code></a>
is strongly recommended and required in order to install Kubernetes versions released after September 13, 2023.</strong>
The deprecated legacy repositories, and their contents, might be removed at any time in the future and without
a further notice period. The new package repositories provide downloads for Kubernetes versions starting with v1.24.0.</div><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>There's a dedicated package repository for each Kubernetes minor version. If you want to install
a minor version other than v1.34, please see the installation guide for
your desired minor version.</div><ul class="nav nav-tabs" id="k8s-install" role="tablist"><li class="nav-item"><a data-toggle="tab" class="nav-link active" href="#k8s-install-0" role="tab" aria-controls="k8s-install-0" aria-selected="true">Debian-based distributions</a></li><li class="nav-item"><a data-toggle="tab" class="nav-link" href="#k8s-install-1" role="tab" aria-controls="k8s-install-1">Red Hat-based distributions</a></li><li class="nav-item"><a data-toggle="tab" class="nav-link" href="#k8s-install-2" role="tab" aria-controls="k8s-install-2">Without a package manager</a></li></ul><div class="tab-content" id="k8s-install"><div id="k8s-install-0" class="tab-pane show active" role="tabpanel" aria-labelledby="k8s-install-0"><p><p>These instructions are for Kubernetes v1.34.</p><ol><li><p>Update the <code>apt</code> package index and install packages needed to use the Kubernetes <code>apt</code> repository:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>sudo apt-get update
</span></span><span style="display:flex"><span><span style="color:#080;font-style:italic"># apt-transport-https may be a dummy package; if so, you can skip that package</span>
</span></span><span style="display:flex"><span>sudo apt-get install -y apt-transport-https ca-certificates curl gpg
</span></span></code></pre></div></li><li><p>Download the public signing key for the Kubernetes package repositories.
The same signing key is used for all repositories so you can disregard the version in the URL:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#080;font-style:italic"># If the directory `/etc/apt/keyrings` does not exist, it should be created before the curl command, read the note below.</span>
</span></span><span style="display:flex"><span><span style="color:#080;font-style:italic"># sudo mkdir -p -m 755 /etc/apt/keyrings</span>
</span></span><span style="display:flex"><span>curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.34/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg
</span></span></code></pre></div></li></ol><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>In releases older than Debian 12 and Ubuntu 22.04, directory <code>/etc/apt/keyrings</code> does not
exist by default, and it should be created before the curl command.</div><ol start="3"><li><p>Add the appropriate Kubernetes <code>apt</code> repository. Please note that this repository have packages
only for Kubernetes 1.34; for other Kubernetes minor versions, you need to
change the Kubernetes minor version in the URL to match your desired minor version
(you should also check that you are reading the documentation for the version of Kubernetes
that you plan to install).</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#080;font-style:italic"># This overwrites any existing configuration in /etc/apt/sources.list.d/kubernetes.list</span>
</span></span><span style="display:flex"><span><span style="color:#a2f">echo</span> <span style="color:#b44">'deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.34/deb/ /'</span> | sudo tee /etc/apt/sources.list.d/kubernetes.list
</span></span></code></pre></div></li><li><p>Update the <code>apt</code> package index, install kubelet, kubeadm and kubectl, and pin their version:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>sudo apt-get update
</span></span><span style="display:flex"><span>sudo apt-get install -y kubelet kubeadm kubectl
</span></span><span style="display:flex"><span>sudo apt-mark hold kubelet kubeadm kubectl
</span></span></code></pre></div></li><li><p>(Optional) Enable the kubelet service before running kubeadm:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>sudo systemctl <span style="color:#a2f">enable</span> --now kubelet
</span></span></code></pre></div></li></ol></p></div><div id="k8s-install-1" class="tab-pane" role="tabpanel" aria-labelledby="k8s-install-1"><p><ol><li><p>Set SELinux to <code>permissive</code> mode:</p><p>These instructions are for Kubernetes 1.34.</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#080;font-style:italic"># Set SELinux in permissive mode (effectively disabling it)</span>
</span></span><span style="display:flex"><span>sudo setenforce <span style="color:#666">0</span>
</span></span><span style="display:flex"><span>sudo sed -i <span style="color:#b44">'s/^SELINUX=enforcing$/SELINUX=permissive/'</span> /etc/selinux/config
</span></span></code></pre></div></li></ol><div class="alert alert-caution" role="alert"><h4 class="alert-heading">Caution:</h4><ul><li>Setting SELinux in permissive mode by running <code>setenforce 0</code> and <code>sed ...</code>
effectively disables it. This is required to allow containers to access the host
filesystem; for example, some cluster network plugins require that. You have to
do this until SELinux support is improved in the kubelet.</li><li>You can leave SELinux enabled if you know how to configure it but it may require
settings that are not supported by kubeadm.</li></ul></div><ol start="2"><li><p>Add the Kubernetes <code>yum</code> repository. The <code>exclude</code> parameter in the
repository definition ensures that the packages related to Kubernetes are
not upgraded upon running <code>yum update</code> as there's a special procedure that
must be followed for upgrading Kubernetes. Please note that this repository
have packages only for Kubernetes 1.34; for other
Kubernetes minor versions, you need to change the Kubernetes minor version
in the URL to match your desired minor version (you should also check that
you are reading the documentation for the version of Kubernetes that you
plan to install).</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span><span style="color:#080;font-style:italic"># This overwrites any existing configuration in /etc/yum.repos.d/kubernetes.repo</span>
</span></span><span style="display:flex"><span>cat <span style="color:#b44">&lt;&lt;EOF | sudo tee /etc/yum.repos.d/kubernetes.repo
</span></span></span><span style="display:flex"><span><span style="color:#b44">[kubernetes]
</span></span></span><span style="display:flex"><span><span style="color:#b44">name=Kubernetes
</span></span></span><span style="display:flex"><span><span style="color:#b44">baseurl=https://pkgs.k8s.io/core:/stable:/v1.34/rpm/
</span></span></span><span style="display:flex"><span><span style="color:#b44">enabled=1
</span></span></span><span style="display:flex"><span><span style="color:#b44">gpgcheck=1
</span></span></span><span style="display:flex"><span><span style="color:#b44">gpgkey=https://pkgs.k8s.io/core:/stable:/v1.34/rpm/repodata/repomd.xml.key
</span></span></span><span style="display:flex"><span><span style="color:#b44">exclude=kubelet kubeadm kubectl cri-tools kubernetes-cni
</span></span></span><span style="display:flex"><span><span style="color:#b44">EOF</span>
</span></span></code></pre></div></li><li><p>Install kubelet, kubeadm and kubectl:</p><p>For systems with DNF:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>sudo yum install -y kubelet kubeadm kubectl --disableexcludes<span style="color:#666">=</span>kubernetes
</span></span></code></pre></div><p>For systems with DNF5:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>sudo yum install -y kubelet kubeadm kubectl --setopt<span style="color:#666">=</span><span style="color:#b8860b">disable_excludes</span><span style="color:#666">=</span>kubernetes
</span></span></code></pre></div></li><li><p>(Optional) Enable the kubelet service before running kubeadm:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="display:flex"><span>sudo systemctl <span style="color:#a2f">enable</span> --now kubelet
</span></span></code></pre></div></li></ol></p></div><div id="k8s-install-2" class="tab-pane" role="tabpanel" aria-labelledby="k8s-install-2"><p><p>Install CNI plugins (required for most pod network):</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span><span style="color:#b8860b">CNI_PLUGINS_VERSION</span><span style="color:#666">=</span><span style="color:#b44">"v1.3.0"</span>
</span></span><span style="display:flex"><span><span style="color:#b8860b">ARCH</span><span style="color:#666">=</span><span style="color:#b44">"amd64"</span>
</span></span><span style="display:flex"><span><span style="color:#b8860b">DEST</span><span style="color:#666">=</span><span style="color:#b44">"/opt/cni/bin"</span>
</span></span><span style="display:flex"><span>sudo mkdir -p <span style="color:#b44">"</span><span style="color:#b8860b">$DEST</span><span style="color:#b44">"</span>
</span></span><span style="display:flex"><span>curl -L <span style="color:#b44">"https://github.com/containernetworking/plugins/releases/download/</span><span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">CNI_PLUGINS_VERSION</span><span style="color:#b68;font-weight:700">}</span><span style="color:#b44">/cni-plugins-linux-</span><span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">ARCH</span><span style="color:#b68;font-weight:700">}</span><span style="color:#b44">-</span><span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">CNI_PLUGINS_VERSION</span><span style="color:#b68;font-weight:700">}</span><span style="color:#b44">.tgz"</span> | sudo tar -C <span style="color:#b44">"</span><span style="color:#b8860b">$DEST</span><span style="color:#b44">"</span> -xz
</span></span></code></pre></div><p>Define the directory to download command files:</p><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>The <code>DOWNLOAD_DIR</code> variable must be set to a writable directory.
If you are running Flatcar Container Linux, set <code>DOWNLOAD_DIR="/opt/bin"</code>.</div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span><span style="color:#b8860b">DOWNLOAD_DIR</span><span style="color:#666">=</span><span style="color:#b44">"/usr/local/bin"</span>
</span></span><span style="display:flex"><span>sudo mkdir -p <span style="color:#b44">"</span><span style="color:#b8860b">$DOWNLOAD_DIR</span><span style="color:#b44">"</span>
</span></span></code></pre></div><p>Optionally install crictl (required for interaction with the Container Runtime Interface (CRI), optional for kubeadm):</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span><span style="color:#b8860b">CRICTL_VERSION</span><span style="color:#666">=</span><span style="color:#b44">"v1.31.0"</span>
</span></span><span style="display:flex"><span><span style="color:#b8860b">ARCH</span><span style="color:#666">=</span><span style="color:#b44">"amd64"</span>
</span></span><span style="display:flex"><span>curl -L <span style="color:#b44">"https://github.com/kubernetes-sigs/cri-tools/releases/download/</span><span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">CRICTL_VERSION</span><span style="color:#b68;font-weight:700">}</span><span style="color:#b44">/crictl-</span><span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">CRICTL_VERSION</span><span style="color:#b68;font-weight:700">}</span><span style="color:#b44">-linux-</span><span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">ARCH</span><span style="color:#b68;font-weight:700">}</span><span style="color:#b44">.tar.gz"</span> | sudo tar -C <span style="color:#b8860b">$DOWNLOAD_DIR</span> -xz
</span></span></code></pre></div><p>Install <code>kubeadm</code>, <code>kubelet</code> and add a <code>kubelet</code> systemd service:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span><span style="color:#b8860b">RELEASE</span><span style="color:#666">=</span><span style="color:#b44">"</span><span style="color:#a2f;font-weight:700">$(</span>curl -sSL https://dl.k8s.io/release/stable.txt<span style="color:#a2f;font-weight:700">)</span><span style="color:#b44">"</span>
</span></span><span style="display:flex"><span><span style="color:#b8860b">ARCH</span><span style="color:#666">=</span><span style="color:#b44">"amd64"</span>
</span></span><span style="display:flex"><span><span style="color:#a2f">cd</span> <span style="color:#b8860b">$DOWNLOAD_DIR</span>
</span></span><span style="display:flex"><span>sudo curl -L --remote-name-all https://dl.k8s.io/release/<span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">RELEASE</span><span style="color:#b68;font-weight:700">}</span>/bin/linux/<span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">ARCH</span><span style="color:#b68;font-weight:700">}</span>/<span style="color:#666">{</span>kubeadm,kubelet<span style="color:#666">}</span>
</span></span><span style="display:flex"><span>sudo chmod +x <span style="color:#666">{</span>kubeadm,kubelet<span style="color:#666">}</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:#b8860b">RELEASE_VERSION</span><span style="color:#666">=</span><span style="color:#b44">"v0.16.2"</span>
</span></span><span style="display:flex"><span>curl -sSL <span style="color:#b44">"https://raw.githubusercontent.com/kubernetes/release/</span><span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">RELEASE_VERSION</span><span style="color:#b68;font-weight:700">}</span><span style="color:#b44">/cmd/krel/templates/latest/kubelet/kubelet.service"</span> | sed <span style="color:#b44">"s:/usr/bin:</span><span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">DOWNLOAD_DIR</span><span style="color:#b68;font-weight:700">}</span><span style="color:#b44">:g"</span> | sudo tee /usr/lib/systemd/system/kubelet.service
</span></span><span style="display:flex"><span>sudo mkdir -p /usr/lib/systemd/system/kubelet.service.d
</span></span><span style="display:flex"><span>curl -sSL <span style="color:#b44">"https://raw.githubusercontent.com/kubernetes/release/</span><span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">RELEASE_VERSION</span><span style="color:#b68;font-weight:700">}</span><span style="color:#b44">/cmd/krel/templates/latest/kubeadm/10-kubeadm.conf"</span> | sed <span style="color:#b44">"s:/usr/bin:</span><span style="color:#b68;font-weight:700">${</span><span style="color:#b8860b">DOWNLOAD_DIR</span><span style="color:#b68;font-weight:700">}</span><span style="color:#b44">:g"</span> | sudo tee /usr/lib/systemd/system/kubelet.service.d/10-kubeadm.conf
</span></span></code></pre></div><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>Please refer to the note in the <a href="#before-you-begin">Before you begin</a> section for Linux distributions
that do not include <code>glibc</code> by default.</div><p>Install <code>kubectl</code> by following the instructions on <a href="/docs/tasks/tools/#kubectl">Install Tools page</a>.</p><p>Optionally, enable the kubelet service before running kubeadm:</p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>sudo systemctl <span style="color:#a2f">enable</span> --now kubelet
</span></span></code></pre></div><div class="alert alert-info" role="alert"><h4 class="alert-heading">Note:</h4>The Flatcar Container Linux distribution mounts the <code>/usr</code> directory as a read-only filesystem.
Before bootstrapping your cluster, you need to take additional steps to configure a writable directory.
See the <a href="/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/#usr-mounted-read-only">Kubeadm Troubleshooting guide</a>
to learn how to set up a writable directory.</div></p></div></div><p>The kubelet is now restarting every few seconds, as it waits in a crashloop for
kubeadm to tell it what to do.</p><h2 id="configuring-a-cgroup-driver">Configuring a cgroup driver</h2><p>Both the container runtime and the kubelet have a property called
<a href="/docs/setup/production-environment/container-runtimes/#cgroup-drivers">"cgroup driver"</a>, which is important
for the management of cgroups on Linux machines.</p><div class="alert alert-danger" role="alert"><h4 class="alert-heading">Warning:</h4><p>Matching the container runtime and kubelet cgroup drivers is required or otherwise the kubelet process will fail.</p><p>See <a href="/docs/tasks/administer-cluster/kubeadm/configure-cgroup-driver/">Configuring a cgroup driver</a> for more details.</p></div><h2 id="troubleshooting">Troubleshooting</h2><p>If you are running into difficulties with kubeadm, please consult our
<a href="/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/">troubleshooting docs</a>.</p><h2 id="what-s-next">What's next</h2><ul><li><a href="/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/">Using kubeadm to Create a Cluster</a></li></ul></div>